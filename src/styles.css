@font-face {
  font-family: "JourneySerif";
  src: url("./assets/fonts/NotoSerifCJKsc-Regular.otf") format("opentype");
  font-display: swap;
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: "JourneySans";
  src: url("./assets/fonts/NotoSansCJKsc-Regular.otf") format("opentype");
  font-display: swap;
  font-weight: 400;
  font-style: normal;
}

:root {
  color-scheme: dark;
  --font-title: "JourneySerif", "STSong", serif;
  --font-body: "JourneySans", "PingFang SC", "Microsoft YaHei", sans-serif;
  --bg-deep: #3f6ea5;
  --bg-mid: #6faee0;
  --bg-glow: rgba(255, 214, 138, 0.3);
  --card: rgba(255, 248, 234, 0.9);
  --card-strong: rgba(253, 244, 224, 0.98);
  --card-soft: rgba(166, 110, 49, 0.08);
  --line: rgba(122, 84, 42, 0.3);
  --line-strong: rgba(171, 112, 45, 0.55);
  --text: #fff6e2;
  --text-muted: #e4d5b6;
  --brand: #f0be6f;
  --brand-soft: rgba(240, 190, 111, 0.26);
  --accent: #55acff;
  --success: #7ac84d;
  --danger: #d35353;
  --ease-game: cubic-bezier(0.22, 0.61, 0.36, 1);
  --dur-tap: 120ms;
  --dur-enter: 240ms;
  --dur-emphasis: 420ms;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --app-frame-max-width: 430px;
  --app-frame-gap: 12px;
  --app-frame-width: min(100vw, var(--app-frame-max-width), calc(100dvh - (var(--app-frame-gap) * 2)));
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  height: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font-body);
  color: var(--text);
  background:
    radial-gradient(circle at 18% -20%, rgba(255, 232, 181, 0.56), rgba(255, 232, 181, 0) 48%),
    radial-gradient(circle at 78% 0%, rgba(186, 227, 255, 0.42), rgba(157, 201, 255, 0) 44%),
    linear-gradient(165deg, #86b8e8 0%, #6ca8df 44%, #5e95d2 100%);
  display: flex;
  justify-content: center;
  align-items: stretch;
}

.shell {
  width: var(--app-frame-width);
  max-width: var(--app-frame-width);
  height: 100dvh;
  min-height: 100vh;
  max-height: 100dvh;
  margin: 0 auto;
  position: relative;
  background: linear-gradient(180deg, rgba(88, 139, 196, 0.98), rgba(70, 121, 180, 0.98));
  border: none;
  display: grid;
  grid-template-rows: auto 1fr;
  overflow: hidden;
  isolation: isolate;
}

.fx-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.fx-grid {
  position: absolute;
  inset: -8% -12%;
  background:
    linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px),
    linear-gradient(0deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px),
    radial-gradient(circle at 30% -20%, rgba(255, 224, 167, 0.32), rgba(255, 224, 167, 0));
  background-size: 28px 28px, 28px 28px, 100% 100%;
  opacity: 0.18;
}

.fx-stars {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 14% 18%, rgba(252, 245, 224, 0.38) 0 1px, transparent 1.5px),
    radial-gradient(circle at 78% 22%, rgba(191, 213, 255, 0.34) 0 1px, transparent 1.6px),
    radial-gradient(circle at 35% 72%, rgba(242, 206, 138, 0.3) 0 1px, transparent 1.4px),
    radial-gradient(circle at 63% 62%, rgba(205, 227, 255, 0.26) 0 1px, transparent 1.5px);
  background-size: 220px 220px, 260px 260px, 240px 240px, 250px 250px;
  opacity: 0.14;
  animation: starsDrift 18s linear infinite;
}

.fx-halo {
  position: absolute;
  left: -18%;
  right: -18%;
  bottom: -28%;
  height: 60%;
  background: radial-gradient(circle at 50% 20%, rgba(100, 146, 255, 0.34), rgba(100, 146, 255, 0));
  filter: blur(22px);
  opacity: 0.42;
}

.shell[data-scene="entry"] .fx-halo {
  opacity: 0.72;
  filter: blur(24px);
}

.shell[data-scene="panel"] .fx-grid {
  filter: hue-rotate(8deg) saturate(1.08);
}

.shell[data-scene="shelf"] .fx-grid {
  filter: hue-rotate(-12deg) saturate(1.12);
}

.shell[data-scene="shelf"] .fx-halo {
  background: radial-gradient(circle at 48% 24%, rgba(243, 201, 119, 0.34), rgba(243, 201, 119, 0));
}

.shell[data-scene="share"] .fx-grid {
  filter: hue-rotate(18deg) brightness(1.02);
}

.shell[data-scene="settings"] .fx-grid {
  filter: hue-rotate(-4deg) saturate(0.94);
}

.game-toast-layer {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  overflow: hidden;
}

.shell::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 1px solid rgba(253, 224, 161, 0.18);
  pointer-events: none;
  z-index: 1;
}

.shell[data-scene="world"]::before {
  display: none;
}

@media (min-width: 540px) {
  body {
    padding: 0;
  }

  .shell {
    height: 100dvh;
    min-height: 100vh;
    max-height: 100dvh;
    border-radius: 0;
    box-shadow: none;
  }
}

.app-header,
.app-main {
  position: relative;
  z-index: 2;
}

.app-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 4;
  pointer-events: none;
  padding: calc(12px + var(--safe-top)) 16px 10px;
  border-bottom: none;
  background:
    linear-gradient(180deg, rgba(93, 132, 176, 0.58), rgba(93, 132, 176, 0.1) 60%, rgba(93, 132, 176, 0)),
    radial-gradient(circle at 18% -35%, rgba(255, 231, 181, 0.42), rgba(255, 223, 161, 0));
  backdrop-filter: blur(6px);
}

.app-kicker {
  margin: 0;
  font-size: 11px;
  letter-spacing: 0.1em;
  color: var(--text-muted);
  text-transform: uppercase;
}

.title-row {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
}

.title-meta {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  pointer-events: auto;
}

.header-icon-btn {
  min-height: 26px;
  width: 26px;
  border-radius: 999px;
  border: 1px solid rgba(243, 201, 119, 0.44);
  background:
    radial-gradient(circle at 32% 28%, rgba(252, 224, 160, 0.38), rgba(252, 224, 160, 0.04)),
    rgba(10, 22, 42, 0.76);
  box-shadow:
    inset 0 0 0 1px rgba(255, 248, 229, 0.1),
    0 0 10px rgba(243, 201, 119, 0.2);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.header-icon-btn::before {
  content: "";
  width: 9px;
  height: 9px;
  border-top: 2px solid rgba(255, 240, 209, 0.96);
  border-right: 2px solid rgba(255, 240, 209, 0.96);
  transform: rotate(45deg) translate(-1px, 1px);
}

.header-icon-btn::after {
  content: "";
  position: absolute;
  width: 9px;
  height: 2px;
  background: rgba(255, 240, 209, 0.92);
  transform: translate(-1px, 3px) rotate(-45deg);
  border-radius: 2px;
}

.header-icon-btn.active {
  border-color: rgba(243, 201, 119, 0.74);
  box-shadow:
    inset 0 0 0 1px rgba(255, 248, 229, 0.2),
    0 0 14px rgba(243, 201, 119, 0.38);
}

.header-spark-lottie {
  width: 24px;
  height: 24px;
  border-radius: 999px;
  border: 1px solid rgba(160, 194, 255, 0.24);
  background: radial-gradient(circle at 50% 50%, rgba(243, 201, 119, 0.3), rgba(243, 201, 119, 0.02));
  opacity: 0.85;
  overflow: hidden;
}

.header-spark-lottie.ready {
  border-color: rgba(243, 201, 119, 0.46);
  box-shadow: 0 0 12px rgba(243, 201, 119, 0.28);
}

.header-spark-lottie svg {
  display: block;
  width: 100%;
  height: 100%;
}

.app-header h1 {
  margin: 4px 0 2px;
  font-size: 30px;
  font-family: var(--font-title);
  font-weight: 400;
  letter-spacing: 0.02em;
  line-height: 1.05;
  color: #fff6e2;
  text-shadow:
    0 2px 8px rgba(18, 32, 50, 0.52),
    0 0 2px rgba(18, 32, 50, 0.8);
}

.level-badge {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  color: #fff0cf;
  border: 1px solid rgba(251, 215, 147, 0.64);
  background: linear-gradient(120deg, rgba(245, 195, 95, 0.5), rgba(150, 98, 41, 0.22));
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.16),
    0 6px 12px rgba(74, 44, 11, 0.32);
}

#app-page-subtitle {
  margin: 0;
  font-size: 12px;
  color: var(--text-muted);
}

.app-main {
  padding: 0;
  overflow: hidden;
  min-height: 0;
  height: 100dvh;
}

.shell[data-scene="world"] .app-main {
  padding: 0 !important;
}

.shell[data-scene="world"] .app-header {
  display: none;
}

.view {
  display: none;
  height: 100%;
  gap: 8px;
  min-height: 100%;
  align-content: start;
  grid-auto-rows: min-content;
}

.view.active {
  display: grid;
  overflow-y: auto;
  overscroll-behavior: contain;
  padding-right: 2px;
  padding-bottom: 8px;
}

.view-enter {
  animation: viewEnter 240ms ease-out both;
}

.world-view {
  grid-template-rows: minmax(0, 1fr);
}

.world-view.active {
  overflow: hidden;
  padding: 0;
}

.world-main-card {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  gap: 0;
  overflow: hidden;
  border: none;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
}

.card.world-main-card {
  border: none;
  border-radius: 0;
  padding: 0;
  background: transparent;
  box-shadow: none;
}

.world-head {
  position: absolute;
  top: calc(10px + var(--safe-top));
  left: 12px;
  right: 12px;
  z-index: 2;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  pointer-events: none;
}

.world-overview {
  position: absolute;
  top: calc(54px + var(--safe-top));
  left: 12px;
  right: 12px;
  z-index: 2;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  pointer-events: none;
}

.world-status {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.world-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  pointer-events: auto;
}

.world-action-btn {
  min-height: 34px;
  min-width: 62px;
  border-radius: 8px;
  border: 1px solid rgba(252, 220, 161, 0.46);
  background:
    linear-gradient(180deg, rgba(38, 77, 115, 0.9), rgba(21, 47, 77, 0.88)),
    linear-gradient(125deg, rgba(255, 238, 203, 0.16), rgba(255, 238, 203, 0));
  color: #fff3d9;
  font-family: var(--font-body);
  font-size: 13px;
  letter-spacing: 0.02em;
  padding: 6px 12px;
  box-shadow:
    0 6px 14px rgba(11, 30, 50, 0.32),
    inset 0 1px 0 rgba(255, 247, 228, 0.18);
  cursor: pointer;
}

.world-action-btn:hover,
.world-action-btn:focus-visible {
  filter: brightness(1.06);
  transform: translateY(-1px);
  outline: none;
}

.world-action-btn:active {
  transform: translateY(1px) scale(0.99);
}

.world-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  min-height: 100%;
  height: 100%;
  border-radius: 0;
  border: none;
  background:
    radial-gradient(circle at 30% 15%, rgba(255, 230, 168, 0.2), rgba(255, 216, 146, 0)),
    linear-gradient(180deg, rgba(146, 199, 240, 0.92), rgba(127, 184, 231, 0.94));
  overflow: hidden;
  position: relative;
  box-shadow: inset 0 1px 0 rgba(255, 248, 229, 0.22);
}

.shell[data-scene="world"] .world-canvas {
  border-radius: 0;
  border: none;
  box-shadow: none;
}

.world-canvas canvas {
  display: block;
  width: 100%;
  height: 100%;
}

.world-hud {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: calc(10px + var(--safe-bottom));
  z-index: 2;
  display: flex;
  align-items: center;
  min-height: 0;
  padding: 0;
  border-radius: 0;
  background: none;
  border: none;
  pointer-events: none;
  backdrop-filter: none;
  box-shadow: none;
}

#world-zone-hint {
  margin: 0;
  width: min(100%, 560px);
  padding: 9px 12px;
  border-radius: 10px;
  border: 1px solid rgba(244, 209, 143, 0.52);
  background: rgba(19, 40, 64, 0.74);
  box-shadow:
    0 6px 14px rgba(14, 35, 56, 0.3),
    inset 0 1px 0 rgba(255, 243, 214, 0.2);
}

.world-zone-hot {
  color: #fff4d9;
  text-shadow: 0 0 5px rgba(255, 227, 164, 0.52);
}

.world-hud .tip {
  color: #f8e8c8;
  text-shadow: 0 1px 2px rgba(13, 26, 43, 0.6);
}

.world-overview-chip {
  max-width: min(100%, 248px);
  border: 1px solid rgba(230, 198, 137, 0.46);
  background:
    linear-gradient(180deg, rgba(34, 57, 82, 0.84), rgba(24, 42, 63, 0.9)),
    radial-gradient(circle at 16% 18%, rgba(255, 230, 171, 0.18), rgba(255, 230, 171, 0));
  color: #f8ebce;
  box-shadow:
    0 6px 12px rgba(12, 29, 49, 0.26),
    inset 0 1px 0 rgba(255, 240, 204, 0.18);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.world-overview-chip.ready {
  border-color: rgba(170, 224, 115, 0.55);
  background:
    linear-gradient(180deg, rgba(46, 83, 49, 0.9), rgba(33, 63, 37, 0.92)),
    radial-gradient(circle at 16% 18%, rgba(206, 255, 145, 0.22), rgba(206, 255, 145, 0));
}

.world-overview-chip.hot {
  border-color: rgba(255, 222, 149, 0.62);
}

.shell[data-density="compact"] .app-header {
  padding: calc(10px + var(--safe-top)) 14px 8px;
}

.shell[data-density="compact"] .app-header h1 {
  font-size: 28px;
  margin: 2px 0 1px;
}

.shell[data-density="compact"] #app-page-subtitle {
  font-size: 11px;
}

.shell[data-density="compact"] .app-main {
  padding: 8px 10px;
}

.shell[data-density="tight"] .app-header {
  padding: calc(9px + var(--safe-top)) 12px 7px;
}

.shell[data-density="tight"] .app-header h1 {
  font-size: 25px;
}

.shell[data-density="tight"] .app-main {
  padding: 7px 8px;
}

.shell[data-density="ultra-tight"] .app-header {
  padding: calc(8px + var(--safe-top)) 10px 6px;
}

.shell[data-density="ultra-tight"] .app-header h1 {
  font-size: 23px;
}

.shell[data-density="ultra-tight"] .app-main {
  padding: 6px 7px;
}

.card {
  background:
    linear-gradient(160deg, rgba(27, 46, 82, 0.6), rgba(12, 23, 46, 0.82)),
    var(--card);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 11px;
  display: grid;
  gap: 8px;
  align-content: start;
  min-height: 0;
  overflow: hidden;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    0 8px 18px rgba(2, 10, 24, 0.36);
  transition:
    border-color var(--dur-enter) var(--ease-game),
    box-shadow var(--dur-enter) var(--ease-game),
    transform var(--dur-enter) var(--ease-game);
}

.view.active .card {
  animation: cardSettle var(--dur-enter) var(--ease-game) both;
}

.card h2,
.card h3 {
  margin: 0;
  font-family: var(--font-title);
  font-weight: 400;
  letter-spacing: 0.01em;
}

.card h2 {
  font-size: 18px;
}

.card h3 {
  font-size: 13px;
}

.mini-card .card-head h2 {
  font-size: 15px;
}

.quest-strip {
  border: 1px solid rgba(243, 201, 119, 0.33);
  border-radius: 12px;
  background:
    linear-gradient(120deg, rgba(243, 201, 119, 0.19), rgba(124, 84, 29, 0.05)),
    rgba(20, 34, 58, 0.68);
  padding: 8px 10px;
  display: grid;
  gap: 2px;
}

.quest-title {
  margin: 0;
  font-size: 13px;
  color: #f7deb0;
}

.quest-sub {
  margin: 0;
  font-size: 11px;
  color: rgba(243, 229, 195, 0.86);
}

.honor-card {
  border-radius: 12px;
  border: 1px solid rgba(141, 176, 255, 0.42);
  background: linear-gradient(120deg, rgba(102, 138, 223, 0.25), rgba(24, 42, 80, 0.4));
  padding: 8px 10px;
  font-size: 12px;
  color: #dce8ff;
  animation: itemRise 320ms ease-out both;
}

label {
  display: grid;
  gap: 5px;
  font-size: 12px;
  color: var(--text-muted);
}

input,
select,
textarea,
button {
  font: inherit;
}

input,
select,
textarea {
  width: 100%;
  min-height: 40px;
  border-radius: 11px;
  border: 1px solid rgba(145, 106, 59, 0.3);
  background: rgba(255, 248, 231, 0.9);
  color: #43331d;
  padding: 8px 10px;
  outline: none;
}

input::placeholder {
  color: rgba(125, 102, 70, 0.66);
}

textarea {
  min-height: 104px;
  resize: vertical;
  line-height: 1.45;
}

input:focus,
select:focus,
textarea:focus {
  border-color: rgba(141, 191, 73, 0.72);
  box-shadow:
    0 0 0 3px rgba(141, 191, 73, 0.18),
    inset 0 0 0 1px rgba(141, 191, 73, 0.2);
}

.field-grid {
  display: grid;
  gap: 8px;
}

.field-grid.two {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.hidden {
  display: none !important;
}

button {
  appearance: none;
  -webkit-appearance: none;
  min-height: 40px;
  border-radius: 12px;
  border: none;
  line-height: 1.4;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition:
    transform var(--dur-tap) var(--ease-game),
    filter var(--dur-tap) var(--ease-game),
    border-color var(--dur-tap) var(--ease-game),
    box-shadow var(--dur-enter) var(--ease-game),
    background-position var(--dur-emphasis) var(--ease-game);
}

button::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(110deg, rgba(255, 255, 255, 0), rgba(255, 248, 230, 0.24), rgba(255, 255, 255, 0));
  transform: translateX(-130%);
  transition: transform 460ms var(--ease-game);
  pointer-events: none;
}

button:active {
  transform: translateY(1px) scale(0.985);
}

button:hover {
  filter: brightness(1.06);
}

button:hover::after {
  transform: translateX(130%);
}

.btn-primary {
  color: #1f2b12;
  font-weight: 600;
  background:
    linear-gradient(180deg, #9be55c 0%, #7ccc3f 55%, #62b82d 100%);
  box-shadow:
    inset 0 1px 0 rgba(232, 255, 210, 0.86),
    0 8px 16px rgba(63, 104, 31, 0.32);
  background-size: 150% 150%;
}

.btn-primary:hover {
  box-shadow:
    inset 0 1px 0 rgba(232, 255, 210, 0.92),
    0 10px 20px rgba(63, 104, 31, 0.38);
}

.btn-secondary {
  background:
    linear-gradient(180deg, rgba(255, 242, 211, 0.94), rgba(244, 223, 185, 0.9));
  color: #5b3f1c;
  border: 1px solid rgba(160, 116, 61, 0.46);
  font-weight: 600;
  background-size: 140% 140%;
}

.btn-secondary:hover {
  box-shadow: 0 0 0 1px rgba(225, 181, 120, 0.42), 0 8px 16px rgba(90, 58, 25, 0.24);
}

.btn-ghost {
  background: rgba(46, 71, 104, 0.74);
  color: #ebf3ff;
  border: 1px solid rgba(162, 202, 255, 0.38);
  font-weight: 600;
}

.btn-ghost:hover {
  box-shadow: 0 8px 14px rgba(22, 38, 63, 0.3);
}

.btn-danger {
  background: linear-gradient(180deg, rgba(229, 112, 112, 0.92), rgba(198, 74, 74, 0.9));
  color: #fff1ea;
  border: 1px solid rgba(255, 174, 164, 0.53);
  font-weight: 600;
}

.text-btn {
  min-height: 28px;
  padding: 0 10px;
  border: 1px solid rgba(168, 123, 73, 0.46);
  background: rgba(255, 243, 216, 0.9);
  color: #694621;
  font-size: 12px;
}

.card-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.head-actions {
  display: flex;
  gap: 6px;
}

.inline-actions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.inline-actions-entry {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.button-stack {
  display: grid;
  gap: 8px;
}

.tip {
  margin: 0;
  font-size: 12px;
  color: #5f482c;
  line-height: 1.35;
}

.tip.strong {
  color: #4b351b;
  font-weight: 600;
}

.feedback {
  margin: 0;
  min-height: 0;
  font-size: 12px;
  color: #6a502f;
  line-height: 1.3;
}

.feedback-pulse {
  animation: feedbackPulse 280ms ease-out;
}

.game-toast {
  position: absolute;
  left: 50%;
  margin: 0;
  padding: 5px 12px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.02em;
  transform: translate(-50%, 8px) scale(0.95);
  opacity: 0;
  border: 1px solid rgba(160, 194, 255, 0.4);
  background: rgba(10, 23, 44, 0.88);
  color: #d9e7ff;
  box-shadow: 0 8px 16px rgba(2, 10, 24, 0.4);
  transition:
    opacity 200ms ease,
    transform 260ms var(--ease-game);
}

.game-toast.show {
  opacity: 1;
  transform: translate(-50%, -6px) scale(1);
}

.game-toast.hide {
  opacity: 0;
  transform: translate(-50%, -20px) scale(0.98);
}

.game-toast.gain {
  border-color: rgba(243, 201, 119, 0.56);
  background: rgba(60, 41, 13, 0.9);
  color: #fde9be;
}

.game-toast.level {
  border-color: rgba(255, 220, 144, 0.65);
  background: rgba(78, 54, 16, 0.94);
  color: #fff0d3;
}

.game-toast.skill {
  border-color: rgba(159, 185, 255, 0.58);
  background: rgba(18, 35, 72, 0.92);
  color: #dde9ff;
}

.spark-particle {
  position: absolute;
  width: 5px;
  height: 5px;
  border-radius: 50%;
  pointer-events: none;
  background: #dce8ff;
  box-shadow: 0 0 8px rgba(220, 232, 255, 0.66);
  transform: translate(-50%, -50%);
  animation: sparkParticle 720ms ease-out forwards;
}

.spark-particle.gain,
.spark-particle.level {
  background: #f7d28d;
  box-shadow: 0 0 10px rgba(247, 210, 141, 0.72);
}

.spark-particle.skill {
  background: #9cb8ff;
  box-shadow: 0 0 10px rgba(156, 184, 255, 0.7);
}

.selection-card {
  border: 1px dashed rgba(180, 133, 75, 0.42);
  border-radius: 12px;
  background: rgba(255, 247, 229, 0.84);
  padding: 8px 10px;
  min-height: 46px;
  display: grid;
  align-content: center;
  gap: 2px;
}

.selection-pill {
  border: 1px solid rgba(183, 123, 53, 0.52);
  border-radius: 10px;
  background: linear-gradient(125deg, rgba(255, 230, 186, 0.85), rgba(239, 204, 149, 0.72));
  min-height: 34px;
  padding: 6px 9px;
  display: flex;
  align-items: center;
  gap: 7px;
  overflow: hidden;
}

.selection-pill-kicker {
  flex: 0 0 auto;
  font-size: 10px;
  color: #6a4522;
  border: 1px solid rgba(179, 117, 52, 0.42);
  border-radius: 999px;
  padding: 1px 7px;
}

.selection-pill strong {
  margin: 0;
  flex: 1;
  min-width: 0;
  font-size: 12px;
  color: #52381c;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.selection-pill-sub {
  flex: 0 0 auto;
  max-width: 84px;
  font-size: 10px;
  color: #7b5a36;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.selection-pill.selection-pulse {
  animation: selectionPulse 340ms ease-out;
}

.btn-primary.armed {
  box-shadow:
    inset 0 1px 0 rgba(255, 250, 238, 0.78),
    0 10px 18px rgba(175, 129, 44, 0.3);
}

.btn-primary.armed.armed-pulse {
  animation: armedPulse 320ms ease-out;
}

.selection-title {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: #54391d;
}

.selection-sub {
  margin: 0;
  font-size: 11px;
  color: #7d6140;
}

.search-results {
  display: grid;
  gap: 6px;
}

.search-item {
  width: 100%;
  min-height: 66px;
  border: 1px solid rgba(178, 126, 68, 0.46);
  border-radius: 12px;
  background:
    linear-gradient(180deg, rgba(255, 249, 232, 0.98), rgba(246, 226, 190, 0.96)),
    repeating-linear-gradient(
      90deg,
      rgba(188, 140, 82, 0.06) 0,
      rgba(188, 140, 82, 0.06) 1px,
      transparent 1px,
      transparent 8px
    );
  padding: 9px 10px;
  text-align: left;
  display: grid;
  align-content: start;
  gap: 3px;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 4px 10px rgba(121, 83, 35, 0.18);
}

.search-item.active {
  border-color: rgba(120, 186, 55, 0.8);
  background:
    linear-gradient(120deg, rgba(233, 255, 201, 0.96), rgba(252, 240, 208, 0.98)),
    repeating-linear-gradient(
      90deg,
      rgba(142, 205, 74, 0.12) 0,
      rgba(142, 205, 74, 0.12) 1px,
      transparent 1px,
      transparent 8px
    );
}

.search-item mark {
  background: rgba(136, 200, 73, 0.35);
  color: #4c3318;
  padding: 0 1px;
  border-radius: 3px;
}

.search-item-title {
  display: block;
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  line-height: 1.45;
  color: #4d3418;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-item-sub {
  display: block;
  margin: 0;
  font-size: 11px;
  color: #78593a;
  line-height: 1.45;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-empty {
  border: 1px dashed rgba(177, 129, 74, 0.36);
  border-radius: 11px;
  background: rgba(255, 245, 223, 0.86);
  padding: 8px;
  font-size: 11px;
  color: #735636;
}

.stack-list {
  display: grid;
  gap: 6px;
}

.stack-list.compact {
  gap: 5px;
}

.item {
  border-radius: 11px;
  border: 1px solid rgba(177, 128, 72, 0.34);
  background: rgba(255, 245, 223, 0.86);
  padding: 8px 9px;
  display: grid;
  gap: 3px;
}

.item-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.item-title {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  color: #4e3519;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-sub {
  margin: 0;
  font-size: 11px;
  color: #7b5f3d;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.item-meta {
  margin: 0;
  font-size: 10px;
  color: #7b5e3d;
  line-height: 1.2;
  white-space: nowrap;
}

.entry-view .mini-card {
  padding: 8px 9px;
  gap: 6px;
}

.entry-view .mini-card .card-head h2 {
  font-size: 13px;
}

.entry-view .mini-card .text-btn {
  min-height: 24px;
  font-size: 11px;
}

#entry-book-list {
  gap: 4px;
}

#entry-book-list .item.item-preview {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 6px;
  min-height: 22px;
  padding: 3px 7px;
}

#entry-book-list .item.item-preview .item-title {
  font-size: 12px;
  line-height: 1.2;
}

#entry-book-list .item.item-preview .item-meta {
  color: #765839;
}

.badge {
  border: 1px solid rgba(170, 121, 66, 0.4);
  border-radius: 999px;
  background: rgba(254, 242, 214, 0.92);
  padding: 2px 8px;
  font-size: 10px;
  color: #674626;
  white-space: nowrap;
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

#sheet-book-progress-range {
  accent-color: #f2c06d;
}

.battle-report {
  border: 1px solid rgba(160, 194, 255, 0.26);
  border-radius: 12px;
  padding: 8px;
  background: rgba(9, 18, 36, 0.7);
  display: grid;
  gap: 6px;
}

.battle-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.battle-head h3 {
  font-size: 14px;
}

.reward-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.reward-item {
  border: 1px solid rgba(160, 194, 255, 0.3);
  border-radius: 11px;
  background: linear-gradient(145deg, rgba(34, 55, 96, 0.68), rgba(11, 22, 42, 0.74));
  padding: 7px;
  display: grid;
  gap: 2px;
  animation: itemRise 220ms ease-out both;
}

.reward-item span {
  font-size: 11px;
  color: var(--text-muted);
}

.reward-item b {
  font-size: 14px;
  color: #ffe8be;
}

.chip-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.chip {
  border: 1px solid rgba(165, 114, 57, 0.34);
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 11px;
  color: #6f4b25;
  background: rgba(255, 244, 219, 0.9);
}

.chip.active {
  border-color: rgba(133, 190, 65, 0.56);
  background: rgba(219, 248, 185, 0.72);
  color: #425523;
}

.skill-focus-list {
  display: grid;
  gap: 7px;
}

.skill-crest {
  border: 1px solid rgba(181, 126, 62, 0.44);
  border-radius: 12px;
  padding: 8px 10px;
  background:
    linear-gradient(126deg, rgba(255, 224, 166, 0.7), rgba(242, 210, 152, 0.62)),
    rgba(255, 246, 226, 0.7);
  box-shadow:
    inset 0 1px 0 rgba(255, 245, 222, 0.46),
    0 6px 12px rgba(64, 39, 15, 0.16);
  display: grid;
  gap: 2px;
}

.skill-crest.empty {
  border-style: dashed;
  border-color: rgba(182, 137, 82, 0.36);
  background: rgba(255, 243, 217, 0.8);
}

.skill-crest-title {
  margin: 0;
  font-size: 14px;
  font-weight: 700;
  color: #5a3d1d;
}

.skill-crest-sub {
  margin: 0;
  font-size: 11px;
  color: #715334;
  line-height: 1.35;
}

.panel-core {
  border: 1px solid rgba(178, 124, 63, 0.36);
  border-radius: 12px;
  padding: 8px 10px;
  background: rgba(255, 243, 217, 0.8);
  display: grid;
  gap: 6px;
}

.panel-summary-card {
  gap: 6px;
}

.panel-chip-head {
  margin-top: 2px;
}

.panel-skills-card {
  gap: 7px;
}

.panel-mini-label {
  margin: 0;
  font-size: 11px;
  color: var(--text-muted);
}

.panel-kicker {
  margin: 0;
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(122, 88, 46, 0.84);
}

#panel-level-line {
  margin: 4px 0 0;
  font-family: var(--font-title);
  font-size: 18px;
  color: #5a3f1d;
}

.xp-track {
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(171, 116, 59, 0.32);
  background: rgba(213, 184, 142, 0.5);
  overflow: hidden;
}

.xp-fill {
  height: 100%;
  width: 0;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(124, 167, 255, 0.95), rgba(176, 143, 249, 0.96), rgba(242, 192, 109, 0.98));
  box-shadow: 0 0 12px rgba(242, 192, 109, 0.44);
  transition: width 560ms var(--ease-game);
}

.attribute-list {
  display: grid;
  gap: 7px;
}

.attribute-summary-list {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.attr-rpg-row {
  border: 1px solid rgba(170, 119, 64, 0.3);
  border-radius: 12px;
  padding: 6px 8px;
  display: grid;
  gap: 5px;
  background:
    radial-gradient(circle at 8% 15%, rgba(255, 255, 255, 0.09), rgba(255, 255, 255, 0)),
    rgba(255, 244, 218, 0.86);
}

.attr-rpg-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 7px;
}

.attr-rpg-label {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
  color: #6a4823;
}

.attr-rpg-tier {
  border-radius: 999px;
  border: 1px solid rgba(167, 115, 58, 0.4);
  padding: 1px 7px;
  font-size: 10px;
  color: #6f4a21;
}

.attr-rpg-body {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  gap: 8px;
  align-items: center;
}

.attr-rpg-value {
  font-size: 20px;
  color: #583c1b;
  font-variant-numeric: tabular-nums;
}

.attr-rpg-track {
  height: 8px;
  border-radius: 999px;
  background: rgba(185, 150, 105, 0.36);
  overflow: hidden;
}

.attr-rpg-fill {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(126, 171, 255, 0.95), rgba(172, 141, 246, 0.95), rgba(243, 204, 129, 0.96));
  box-shadow: 0 0 10px rgba(141, 182, 255, 0.35);
  transition: width 480ms var(--ease-game);
}

.attr-rpg-row.tier-s {
  border-color: rgba(247, 212, 143, 0.72);
  box-shadow: inset 0 0 0 1px rgba(255, 245, 216, 0.1), 0 0 14px rgba(243, 201, 119, 0.24);
}

.attr-rpg-row.tier-a .attr-rpg-tier,
.attr-rpg-row.tier-s .attr-rpg-tier {
  color: #fff3d6;
}

.skill-star-map {
  position: relative;
  min-height: 268px;
  border: 1px solid rgba(170, 117, 60, 0.32);
  border-radius: 12px;
  background:
    repeating-linear-gradient(
      to top,
      rgba(162, 119, 66, 0.08) 0,
      rgba(162, 119, 66, 0.08) 1px,
      transparent 1px,
      transparent calc(100% / max(1, var(--skill-tier-count, 5)))
    ),
    radial-gradient(circle at 50% 50%, rgba(139, 178, 255, 0.24), rgba(139, 178, 255, 0) 56%),
    radial-gradient(circle at 22% 20%, rgba(243, 201, 119, 0.26), rgba(243, 201, 119, 0) 42%),
    rgba(255, 246, 225, 0.78);
  overflow: hidden;
}

.skill-star-map::before {
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 16px;
  border: 1px dashed rgba(173, 125, 70, 0.3);
  pointer-events: none;
}

.skill-star-map::after {
  content: "";
  position: absolute;
  inset: 12px;
  background:
    repeating-linear-gradient(
      to right,
      transparent 0,
      transparent calc(100% / max(1, var(--skill-path-count, 4))),
      rgba(168, 123, 72, 0.16) calc(100% / max(1, var(--skill-path-count, 4))),
      rgba(168, 123, 72, 0.16) calc(100% / max(1, var(--skill-path-count, 4)) + 1px)
    );
  pointer-events: none;
}

.skill-star-node {
  position: absolute;
  left: var(--x);
  top: var(--y);
  width: clamp(72px, 18vw, 92px);
  min-height: clamp(46px, 9vw, 52px);
  transform: translate(-50%, -50%);
  border-radius: 12px;
  border: 1px solid rgba(170, 121, 66, 0.36);
  background: rgba(253, 241, 214, 0.92);
  padding: 14px 5px 6px;
  display: grid;
  justify-items: center;
  align-content: center;
  gap: 3px;
  text-align: center;
}

.skill-star-tier {
  position: absolute;
  top: 2px;
  right: 5px;
  font-size: 9px;
  color: #7f5a31;
  border-radius: 999px;
  border: 1px solid rgba(166, 115, 57, 0.35);
  padding: 0 4px;
  background: rgba(255, 240, 206, 0.72);
}

.skill-star-core {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: rgba(124, 162, 243, 0.64);
  box-shadow: 0 0 7px rgba(124, 162, 243, 0.44);
}

.skill-star-name {
  display: block;
  font-size: clamp(10px, 2.4vw, 11px);
  line-height: 1.2;
  color: #674726;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  width: 100%;
}

.skill-star-node.path-insight {
  box-shadow: inset 0 0 0 1px rgba(122, 167, 232, 0.25);
}

.skill-star-node.path-will {
  box-shadow: inset 0 0 0 1px rgba(171, 146, 234, 0.24);
}

.skill-star-node.path-logic {
  box-shadow: inset 0 0 0 1px rgba(136, 176, 138, 0.25);
}

.skill-star-node.path-strategy {
  box-shadow: inset 0 0 0 1px rgba(221, 164, 106, 0.26);
}

.skill-star-node.unlocked {
  border-color: rgba(118, 183, 56, 0.66);
  background: linear-gradient(130deg, rgba(228, 255, 188, 0.84), rgba(255, 242, 205, 0.92));
}

.skill-star-node.unlocked .skill-star-core {
  background: rgba(133, 197, 68, 0.95);
  box-shadow: 0 0 11px rgba(133, 197, 68, 0.64);
}

.skill-star-node.unlocked .skill-star-name {
  color: #425523;
}

.skill-star-node.unlocked .skill-star-tier {
  color: #486026;
  border-color: rgba(112, 170, 52, 0.46);
  background: rgba(223, 247, 183, 0.78);
}

.skill-star-node.equipped::after {
  content: "AUTO";
  position: absolute;
  right: 5px;
  top: 4px;
  font-size: 9px;
  color: #ffe9bc;
}

.skill-star-node.pulse {
  animation: skillStarPulse 700ms ease-out;
}

.skill-auto-slots {
  display: grid;
  grid-template-columns: 1fr;
  gap: 5px;
}

.skill-lane-progress {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin-top: 8px;
}

.skill-lane-card {
  border-radius: 10px;
  border: 1px solid rgba(171, 124, 69, 0.28);
  background: rgba(255, 244, 218, 0.74);
  padding: 8px;
}

.skill-lane-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 6px;
  color: #6a4925;
  font-size: 12px;
}

.skill-lane-track {
  height: 6px;
  border-radius: 999px;
  background: rgba(92, 114, 152, 0.26);
  overflow: hidden;
  margin-bottom: 6px;
}

.skill-lane-fill {
  display: block;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(106, 140, 243, 0.92), rgba(241, 192, 107, 0.95));
}

.skill-ladder-group + .skill-ladder-group {
  margin-top: 10px;
}

.skill-ladder-list {
  display: grid;
  gap: 8px;
}

.auto-slot {
  border-radius: 999px;
  border: 1px solid rgba(172, 122, 65, 0.42);
  padding: 3px 9px;
  font-size: 11px;
  color: #5b3f1d;
  background: rgba(255, 242, 212, 0.86);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.auto-slot.empty {
  border-style: dashed;
  border-color: rgba(172, 122, 65, 0.3);
  color: #7c5f3e;
}

.attr-row {
  display: grid;
  grid-template-columns: 62px 1fr 38px;
  align-items: center;
  gap: 6px;
  font-size: 11px;
}

.attr-label {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.attr-icon {
  width: 14px;
  height: 14px;
  flex: 0 0 auto;
}

.attr-track {
  height: 8px;
  border-radius: 999px;
  background: rgba(87, 110, 154, 0.26);
  overflow: hidden;
}

.attr-fill {
  height: 100%;
  border-radius: inherit;
  background:
    linear-gradient(90deg, #7da0ff, #9f8cf6 40%, #f2c06d 100%);
  box-shadow: 0 0 12px rgba(141, 182, 255, 0.38);
  transition: width 420ms ease;
}

.attr-value {
  text-align: right;
  color: #6e4b24;
  font-variant-numeric: tabular-nums;
}

.scroll-shelf {
  display: grid;
  gap: 8px;
  align-content: start;
}

.shelf-main-card .tip {
  color: #d7e3fb;
}

.scroll-card {
  width: 100%;
  position: relative;
  border-radius: 12px;
  border: 1px solid rgba(243, 201, 119, 0.28);
  background:
    linear-gradient(132deg, rgba(241, 199, 121, 0.24), rgba(82, 56, 20, 0.08)),
    linear-gradient(180deg, rgba(26, 41, 69, 0.92), rgba(16, 30, 53, 0.9));
  box-shadow:
    inset 0 1px 0 rgba(255, 248, 229, 0.14),
    inset 0 -10px 20px rgba(9, 16, 29, 0.28),
    0 6px 14px rgba(3, 11, 25, 0.34);
  padding: 8px 10px;
  display: grid;
  gap: 4px;
  text-align: left;
  overflow: hidden;
}

.shelf-scroll-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 10px;
}

.bookshelf-sheet {
  display: grid;
  gap: 10px;
}

.bookshelf-head {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 10px;
}

.bookshelf-head-main {
  min-width: 0;
  display: grid;
  gap: 2px;
}

.bookshelf-head-title {
  margin: 0;
  font-size: 16px;
  font-weight: 800;
  color: #4f3316;
}

.bookshelf-head-sub {
  margin: 0;
  font-size: 11px;
  color: #795634;
}

.bookshelf-head-meta {
  margin: 0;
  font-size: 11px;
  color: #7e5a35;
  white-space: nowrap;
}

.bookshelf-filter {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.bookshelf-filter-btn {
  min-height: 44px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid rgba(159, 112, 55, 0.38);
  background:
    linear-gradient(180deg, rgba(255, 245, 219, 0.94), rgba(241, 218, 173, 0.93));
  color: #5b3d1d;
  font-size: 12px;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.bookshelf-filter-btn.active {
  border-color: rgba(120, 83, 41, 0.66);
  background:
    linear-gradient(180deg, rgba(171, 121, 63, 0.96), rgba(132, 91, 46, 0.98));
  color: #fff2d8;
  box-shadow:
    inset 0 1px 0 rgba(255, 233, 192, 0.38),
    0 4px 10px rgba(71, 44, 19, 0.24);
}

.bookshelf-filter-count {
  font-size: 11px;
  opacity: 0.88;
  font-variant-numeric: tabular-nums;
}

.bookshelf-rack {
  --bookshelf-row-size: 3;
  border: 1px solid rgba(160, 112, 56, 0.4);
  border-radius: 14px;
  background:
    radial-gradient(circle at 48% 24%, rgba(255, 243, 212, 0.52), rgba(255, 243, 212, 0)),
    linear-gradient(180deg, rgba(252, 236, 201, 0.93), rgba(236, 206, 149, 0.92));
  padding: 10px;
  display: grid;
  gap: 12px;
}

.bookshelf-row {
  position: relative;
  display: grid;
  grid-template-columns: repeat(var(--bookshelf-row-size), minmax(0, 1fr));
  gap: 8px;
  align-items: end;
  padding: 10px 10px 16px;
}

.bookshelf-row::after {
  content: "";
  position: absolute;
  left: 4px;
  right: 4px;
  bottom: 4px;
  height: 9px;
  border-radius: 999px;
  background:
    linear-gradient(180deg, rgba(170, 118, 61, 0.94), rgba(132, 90, 45, 0.97)),
    repeating-linear-gradient(
      90deg,
      rgba(255, 217, 151, 0.18) 0 2px,
      transparent 2px 10px
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 236, 197, 0.28),
    0 4px 8px rgba(64, 42, 19, 0.26);
  z-index: 0;
}

.bookshelf-book {
  min-height: 232px;
  border: 2px solid rgba(134, 92, 46, 0.55);
  border-radius: 14px;
  padding: 8px;
  position: relative;
  z-index: 1;
  text-align: left;
  background:
    radial-gradient(circle at 30% 16%, rgba(255, 224, 170, 0.3), rgba(255, 224, 170, 0)),
    linear-gradient(180deg, rgba(98, 67, 34, 0.97), rgba(74, 49, 25, 0.99));
  box-shadow:
    inset 0 1px 0 rgba(255, 241, 205, 0.2),
    0 7px 10px rgba(53, 33, 13, 0.26);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.bookshelf-book-status {
  display: inline-flex;
  align-self: flex-start;
  border-radius: 999px;
  border: 1px solid rgba(148, 104, 53, 0.48);
  padding: 2px 7px;
  font-size: 10px;
  font-weight: 700;
  color: #63411f;
  background: rgba(255, 246, 227, 0.92);
  max-width: 100%;
  overflow: hidden;
  text-overflow: clip;
  white-space: normal;
  line-height: 1.2;
  overflow-wrap: anywhere;
}

.bookshelf-book-paper {
  border-radius: 10px;
  border: 1px solid rgba(175, 128, 67, 0.42);
  background:
    radial-gradient(circle at 20% 10%, rgba(255, 250, 238, 0.66), rgba(255, 250, 238, 0)),
    linear-gradient(180deg, rgba(255, 243, 216, 0.97), rgba(237, 207, 155, 0.95));
  padding: 9px 8px 8px;
  display: grid;
  gap: 6px;
  align-content: start;
  min-height: 0;
  flex: 1;
}

.bookshelf-book-title {
  margin: 0;
  font-size: 13px;
  font-weight: 800;
  color: #3d250e;
  line-height: 1.32;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.bookshelf-book-meta {
  margin: 0;
  font-size: 11px;
  color: #6e4f2f;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: clip;
  overflow-wrap: anywhere;
  word-break: break-word;
  min-height: calc(1.3em * 2);
}

.bookshelf-track {
  height: 8px;
  border-radius: 999px;
  border: 1px solid rgba(142, 108, 68, 0.34);
  background: rgba(125, 97, 62, 0.35);
  overflow: hidden;
}

.bookshelf-fill {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #7f9eff, #b79bf2 45%, #f2c06d 100%);
}

.bookshelf-book-progress {
  margin: 0;
  font-size: 11px;
  color: #5f4322;
  line-height: 1.26;
  display: grid;
  gap: 2px;
  min-height: calc(1.26em * 2 + 2px);
}

.bookshelf-book-progress-percent,
.bookshelf-book-progress-pages {
  display: block;
}

.bookshelf-book-progress-percent {
  font-weight: 700;
}

.bookshelf-book-progress-pages {
  color: #6a4a26;
}

.bookshelf-book-actions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.bookshelf-book-open-btn,
.bookshelf-book-edit-btn {
  min-height: 36px;
  border-radius: 9px;
  border: 1px solid rgba(142, 103, 54, 0.55);
  padding: 0 6px;
  font-size: 11px;
  font-weight: 700;
  color: #f7e4bf;
  cursor: pointer;
  transition: transform 150ms ease, filter 150ms ease, box-shadow 150ms ease;
}

.bookshelf-book-open-btn {
  background:
    linear-gradient(180deg, rgba(133, 87, 38, 0.96), rgba(99, 65, 30, 0.99)),
    repeating-linear-gradient(
      90deg,
      rgba(255, 214, 150, 0.12) 0 1px,
      transparent 1px 8px
    );
}

.bookshelf-book-edit-btn {
  background:
    linear-gradient(180deg, rgba(95, 66, 34, 0.95), rgba(71, 49, 26, 0.98)),
    repeating-linear-gradient(
      90deg,
      rgba(255, 209, 143, 0.08) 0 1px,
      transparent 1px 9px
    );
}

.bookshelf-book-open-btn:hover,
.bookshelf-book-edit-btn:hover,
.bookshelf-book-open-btn:focus-visible,
.bookshelf-book-edit-btn:focus-visible {
  filter: brightness(1.08);
  transform: translateY(-1px);
  box-shadow: 0 3px 8px rgba(44, 28, 11, 0.25);
}

.bookshelf-book-open-btn:active,
.bookshelf-book-edit-btn:active {
  transform: translateY(0);
  filter: brightness(0.98);
}

.bookshelf-book-base {
  min-height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(94, 63, 31, 0.44);
  background:
    linear-gradient(180deg, rgba(167, 116, 61, 0.97), rgba(128, 88, 45, 0.98)),
    repeating-linear-gradient(
      90deg,
      rgba(255, 219, 157, 0.14) 0 1px,
      transparent 1px 8px
    );
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  box-shadow:
    inset 0 1px 0 rgba(255, 241, 205, 0.26),
    0 3px 8px rgba(44, 28, 11, 0.28);
}

.bookshelf-book-base-spine {
  width: 7px;
  height: 18px;
  border-radius: 2px;
  background: linear-gradient(180deg, rgba(89, 56, 25, 0.95), rgba(64, 40, 17, 0.98));
}

.bookshelf-book-base-label {
  font-size: 11px;
  color: #f3ddb5;
  font-weight: 700;
  letter-spacing: 0.04em;
}

.bookshelf-empty {
  border: 1px dashed rgba(163, 113, 55, 0.4);
  border-radius: 12px;
  padding: 14px;
  font-size: 12px;
  color: #704e2c;
  background: rgba(255, 246, 225, 0.74);
  text-align: center;
}

.bookshelf-pagination {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
  align-items: center;
}

.bookshelf-page-btn {
  min-height: 44px;
}

.bookshelf-page-label {
  margin: 0;
  text-align: center;
  font-size: 12px;
  font-weight: 700;
  color: #674625;
}

.scroll-card-portrait {
  min-height: 288px;
  border-radius: 16px;
  padding: 10px 10px 12px;
  gap: 0;
  grid-template-rows: auto 1fr auto auto;
  align-content: stretch;
  border: 1px solid rgba(192, 143, 79, 0.48);
  background:
    radial-gradient(circle at 24% 14%, rgba(255, 227, 170, 0.26), rgba(255, 227, 170, 0)),
    linear-gradient(180deg, rgba(63, 42, 20, 0.96), rgba(48, 32, 16, 0.98));
  box-shadow:
    inset 0 1px 0 rgba(255, 244, 216, 0.18),
    inset 0 -12px 20px rgba(20, 13, 5, 0.34),
    0 8px 14px rgba(36, 22, 9, 0.3);
}

.scroll-card-portrait .scroll-card-portrait-roll {
  display: block;
  height: 16px;
  border-radius: 999px;
  border: 1px solid rgba(194, 140, 73, 0.46);
  background:
    repeating-linear-gradient(
      90deg,
      rgba(255, 220, 156, 0.24) 0 4px,
      rgba(101, 68, 31, 0.14) 4px 7px
    ),
    linear-gradient(180deg, rgba(150, 106, 54, 0.96), rgba(107, 74, 37, 0.98));
  box-shadow:
    inset 0 1px 0 rgba(255, 242, 209, 0.3),
    inset 0 -2px 5px rgba(42, 27, 9, 0.42);
}

.scroll-card-portrait .scroll-card-portrait-roll.top {
  margin-bottom: 4px;
}

.scroll-card-portrait .scroll-card-portrait-roll.bottom {
  margin-top: 4px;
}

.scroll-card-portrait-paper {
  border-radius: 12px;
  border: 1px solid rgba(170, 120, 62, 0.4);
  padding: 10px 10px 8px;
  display: grid;
  align-content: start;
  gap: 6px;
  min-height: 200px;
  background:
    radial-gradient(circle at 18% 12%, rgba(255, 248, 234, 0.55), rgba(255, 248, 234, 0)),
    linear-gradient(180deg, rgba(255, 241, 210, 0.98), rgba(235, 207, 154, 0.96)),
    repeating-linear-gradient(
      0deg,
      rgba(165, 126, 75, 0.08) 0,
      rgba(165, 126, 75, 0.08) 1px,
      transparent 1px,
      transparent 6px
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 251, 241, 0.88),
    inset 0 -8px 10px rgba(136, 98, 47, 0.14);
}

.scroll-title-portrait {
  font-size: 14px;
  line-height: 1.35;
  color: #4d3318;
  white-space: normal;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  text-shadow: none;
}

.scroll-sub-portrait {
  font-size: 11px;
  line-height: 1.35;
  color: #725235;
  white-space: normal;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.scroll-percent-portrait {
  margin: 0;
  font-size: 11px;
  color: #5d4321;
}

.scroll-book-base {
  margin-top: 7px;
  border-radius: 10px;
  border: 1px solid rgba(91, 62, 31, 0.46);
  background:
    linear-gradient(180deg, rgba(168, 118, 62, 0.96), rgba(128, 87, 44, 0.98)),
    repeating-linear-gradient(
      90deg,
      rgba(255, 213, 151, 0.13) 0,
      rgba(255, 213, 151, 0.13) 1px,
      transparent 1px,
      transparent 8px
    );
  min-height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  box-shadow:
    inset 0 1px 0 rgba(255, 240, 203, 0.26),
    0 3px 8px rgba(43, 27, 10, 0.3);
}

.scroll-book-base-spine {
  width: 8px;
  height: 22px;
  border-radius: 2px;
  background: linear-gradient(180deg, rgba(79, 52, 24, 0.95), rgba(61, 38, 16, 0.98));
}

.scroll-book-base-label {
  font-size: 11px;
  color: #f3e0b8;
  letter-spacing: 0.06em;
}

.scroll-badge-portrait {
  position: absolute;
  top: 10px;
  right: 10px;
  border-color: rgba(139, 101, 56, 0.48);
  background: rgba(255, 244, 218, 0.92);
}

@media (min-width: 900px) {
  .shelf-scroll-grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 220px));
    justify-content: center;
  }
}

.scroll-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.scroll-head-meta {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex: 0 0 auto;
}

.scroll-title {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: #f6ecd5;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.28);
}

.scroll-title.scroll-title-portrait {
  color: #3d250e;
  font-weight: 800;
  text-shadow: 0 1px 0 rgba(255, 246, 228, 0.78);
}

.scroll-sub.scroll-sub-portrait {
  color: #5f4325;
  text-shadow: 0 1px 0 rgba(255, 247, 229, 0.56);
}

.scroll-percent {
  font-size: 10px;
  color: #efd6a2;
  font-variant-numeric: tabular-nums;
}

.scroll-chevron {
  width: 9px;
  height: 9px;
  border-right: 2px solid rgba(243, 201, 119, 0.8);
  border-bottom: 2px solid rgba(243, 201, 119, 0.8);
  transform: rotate(45deg) translateY(-1px);
  transition: transform var(--dur-enter) var(--ease-game);
}

.scroll-chevron.expanded {
  transform: rotate(-135deg) translateY(-1px);
}

.scroll-sub {
  margin: 0;
  font-size: 11px;
  color: var(--text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.scroll-track {
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(72, 94, 137, 0.56), rgba(55, 73, 108, 0.44));
  overflow: hidden;
}

.scroll-fill {
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #7eabff 0%, #a88df5 35%, #f2c06d 100%);
  box-shadow: 0 0 10px rgba(242, 192, 109, 0.24);
  transition: width 320ms ease, filter 180ms ease;
}

.scroll-main-hit {
  width: 100%;
  min-height: 0;
  border: none;
  border-radius: 0;
  background: transparent;
  padding: 0;
  margin: 0;
  text-align: left;
  display: grid;
  gap: 4px;
  transform: none;
}

.panel-scroll-card {
  position: relative;
  border-radius: 14px;
  border: 1px solid rgba(243, 201, 119, 0.34);
  background:
    radial-gradient(circle at 20% 12%, rgba(243, 201, 119, 0.08), rgba(243, 201, 119, 0)),
    linear-gradient(180deg, rgba(16, 30, 56, 0.9), rgba(10, 20, 38, 0.92));
  padding: 7px 8px 6px;
  overflow: hidden;
  box-shadow:
    inset 0 1px 0 rgba(255, 248, 229, 0.12),
    0 8px 18px rgba(2, 10, 24, 0.36);
  perspective: 980px;
}

.panel-scroll-card .scroll-main-hit {
  gap: 6px;
}

.panel-scroll-card .scroll-main-hit:hover .scroll-roll-shell {
  transform: translateY(-1px) scale(1.008);
  filter: brightness(1.05);
}

.scroll-roll-shell {
  min-height: 48px;
  border-radius: 999px;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(255, 220, 156, 0.2) 0 4px,
      rgba(83, 56, 24, 0.1) 4px 7px
    ),
    linear-gradient(180deg, rgba(126, 90, 45, 0.9), rgba(75, 51, 24, 0.95)),
    linear-gradient(90deg, rgba(248, 218, 161, 0.24), rgba(248, 218, 161, 0));
  border: 1px solid rgba(243, 201, 119, 0.4);
  box-shadow:
    inset 0 1px 0 rgba(253, 239, 204, 0.3),
    inset 0 -5px 9px rgba(25, 16, 7, 0.44),
    0 4px 10px rgba(2, 11, 24, 0.4);
  display: grid;
  grid-template-columns: auto minmax(0, 1fr) auto;
  align-items: center;
  gap: 8px;
  padding: 5px 8px;
  transition:
    transform 220ms var(--ease-game),
    box-shadow 220ms var(--ease-game),
    filter 220ms var(--ease-game);
}

.scroll-roll-end {
  position: relative;
  width: 25px;
  height: 25px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 32% 32%, #fae8c1 8%, #e7bc74 30%, #ae7638 56%, #6f4820 74%, #3d2613 100%);
  box-shadow:
    inset 0 0 0 1px rgba(48, 29, 11, 0.55),
    0 2px 6px rgba(0, 0, 0, 0.35);
}

.scroll-roll-end.left {
  transform: rotate(-6deg);
}

.scroll-roll-end.right {
  transform: rotate(6deg);
}

.scroll-roll-end::before {
  content: "";
  position: absolute;
  inset: 5px;
  border-radius: 50%;
  border: 2px solid rgba(70, 44, 18, 0.52);
}

.scroll-roll-core {
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.scroll-roll-title {
  margin: 0;
  font-size: 13px;
  font-weight: 700;
  color: #fff0ce;
  text-shadow: 0 1px 1px rgba(17, 9, 0, 0.34);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.scroll-roll-meta {
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.scroll-roll-status {
  font-size: 10px;
  color: #fce2b0;
  border: 1px solid rgba(250, 224, 171, 0.46);
  border-radius: 999px;
  padding: 1px 6px;
}

.panel-scroll-card .scroll-chevron {
  border-right-color: rgba(255, 231, 176, 0.88);
  border-bottom-color: rgba(255, 231, 176, 0.88);
}

.scroll-unfurl {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transform-origin: top center;
  transform: rotateX(-72deg) scaleY(0.62) translateY(-9px);
  transition:
    max-height 280ms var(--ease-game),
    opacity 220ms ease,
    transform 300ms var(--ease-game);
}

.panel-scroll-card.expanded .scroll-unfurl {
  max-height: 142px;
  opacity: 1;
  transform: rotateX(0deg) scaleY(1) translateY(0);
}

.scroll-paper {
  border: 1px solid rgba(113, 81, 41, 0.42);
  border-radius: 12px;
  padding: 9px 10px;
  background:
    radial-gradient(circle at 15% 20%, rgba(255, 249, 235, 0.55), rgba(255, 249, 235, 0)),
    linear-gradient(180deg, rgba(250, 233, 194, 0.98), rgba(224, 194, 140, 0.97)),
    repeating-linear-gradient(
      0deg,
      rgba(159, 125, 74, 0.09) 0,
      rgba(159, 125, 74, 0.09) 1px,
      rgba(255, 255, 255, 0) 1px,
      rgba(255, 255, 255, 0) 6px
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 247, 227, 0.85),
    inset 0 -9px 12px rgba(129, 95, 50, 0.16),
    0 4px 10px rgba(49, 34, 13, 0.14);
}

.panel-scroll-card .scroll-paper .scroll-title {
  color: #3b2a16;
  text-shadow: none;
}

.panel-scroll-card .scroll-paper .scroll-sub {
  color: rgba(69, 49, 24, 0.82);
}

.panel-scroll-card .scroll-paper .scroll-track {
  background: linear-gradient(90deg, rgba(157, 122, 71, 0.44), rgba(133, 101, 56, 0.3));
}

.panel-scroll-card .scroll-paper .scroll-fill {
  box-shadow: 0 0 8px rgba(116, 86, 44, 0.3);
}

.panel-scroll-card .scroll-paper .badge {
  color: #5b4120;
  border-color: rgba(108, 78, 39, 0.38);
  background: rgba(255, 246, 229, 0.66);
}

.panel-scroll-card .scroll-paper .scroll-percent {
  color: #5f4523;
}

.panel-scroll-card.expanded .scroll-roll-shell {
  transform: translateY(-1px) scale(0.99);
  filter: saturate(1.04);
}

.panel-scroll-card.expanded {
  border-color: rgba(243, 201, 119, 0.58);
  box-shadow:
    inset 0 1px 0 rgba(255, 248, 229, 0.16),
    0 12px 24px rgba(2, 11, 24, 0.44);
  animation: scrollUnfold 240ms ease-out both;
}

.panel-scroll-card .scroll-main-hit:focus-visible {
  outline: 2px solid rgba(243, 201, 119, 0.56);
  outline-offset: 2px;
  border-radius: 8px;
}

.panel-scroll-card.pulse {
  animation: scrollPulse 300ms ease-out both;
}

.scroll-detail {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transform: translateY(-6px);
  transition:
    max-height 220ms ease,
    opacity 200ms ease,
    transform 220ms ease,
    padding 200ms ease;
  padding: 0;
}

.panel-scroll-card.expanded .scroll-detail {
  max-height: 84px;
  opacity: 1;
  transform: translateY(0);
  padding: 4px 0 2px;
}

.scroll-detail-meta {
  margin: 0;
  font-size: 11px;
  color: #d7c6a1;
}

.scroll-detail-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 4px;
}

.scroll-inline-btn {
  min-height: 28px;
  padding: 0 10px;
  font-size: 11px;
  border-radius: 999px;
}

.scroll-inline-btn.btn-ghost {
  color: #f5dfb6;
  border-color: rgba(243, 201, 119, 0.42);
  background: rgba(19, 31, 54, 0.64);
}

.scroll-empty {
  border: 1px dashed rgba(160, 194, 255, 0.28);
  border-radius: 11px;
  background: rgba(12, 24, 46, 0.68);
  padding: 8px;
  font-size: 11px;
  color: var(--text-muted);
}

.sheet-book-detail,
.sheet-book-pages-editor {
  display: grid;
  gap: 10px;
}

.sheet-book-head h3 {
  margin: 0;
  font-size: 17px;
}

.sheet-book-head .tip {
  margin-top: 4px;
}

.sheet-progress-editor {
  border: 1px solid rgba(160, 194, 255, 0.27);
  border-radius: 11px;
  background: rgba(11, 22, 41, 0.68);
  padding: 9px;
  display: grid;
  gap: 7px;
}

.sheet-progress-row {
  display: grid;
  grid-template-columns: minmax(0, 96px) minmax(0, 1fr);
  gap: 7px;
}

.sheet-reflection-editor {
  border: 1px solid rgba(171, 118, 61, 0.32);
  border-radius: 11px;
  padding: 8px;
  background: rgba(255, 245, 221, 0.82);
  display: grid;
  gap: 7px;
}

.sheet-reflection-list {
  display: grid;
  gap: 7px;
}

.sheet-reflection-list h3 {
  margin: 0;
  font-size: 14px;
}

.reflection-item {
  border: 1px solid rgba(169, 116, 58, 0.3);
  border-radius: 10px;
  padding: 8px;
  background: rgba(255, 244, 218, 0.86);
  display: grid;
  gap: 6px;
}

.reflection-meta {
  margin: 0;
  font-size: 11px;
  color: #76583a;
}

.reflection-text {
  margin: 0;
  font-size: 12px;
  color: #594023;
  line-height: 1.45;
  max-height: 6.8em;
  overflow: hidden;
}

.sheet-share-wrap {
  display: grid;
  gap: 10px;
}

.sheet-world-entry,
.sheet-world-panel,
.sheet-world-settings {
  display: grid;
  gap: 11px;
}

.sheet-world-entry .search-results {
  max-height: min(34vh, 300px);
  overflow-y: auto;
}

.sheet-world-entry .selection-pill {
  margin: 0;
}

.sheet-world-recent {
  border: 1px solid rgba(168, 113, 51, 0.42);
  border-radius: 12px;
  padding: 9px;
  background:
    linear-gradient(180deg, rgba(255, 247, 226, 0.9), rgba(248, 231, 201, 0.86)),
    repeating-linear-gradient(
      90deg,
      rgba(183, 131, 74, 0.08) 0,
      rgba(183, 131, 74, 0.08) 1px,
      transparent 1px,
      transparent 10px
    );
}

.sheet-world-recent h3 {
  margin: 0;
  font-size: 17px;
}

.sheet-world-panel .skill-star-map {
  min-height: 248px;
}

.sheet-world-settings .settings-block {
  padding: 0 0 10px;
  border-bottom: 1px solid rgba(165, 112, 58, 0.27);
}

.sheet-world-settings h3 {
  margin: 0;
}

.share-card {
  border: 1px solid rgba(173, 119, 59, 0.5);
  border-radius: 14px;
  background:
    radial-gradient(circle at top right, rgba(243, 201, 119, 0.28), rgba(243, 201, 119, 0) 58%),
    radial-gradient(circle at 18% 18%, rgba(124, 164, 255, 0.14), rgba(124, 164, 255, 0) 55%),
    rgba(255, 245, 221, 0.92);
  padding: 11px;
  display: grid;
  gap: 5px;
  position: relative;
  overflow: hidden;
}

.share-card::after {
  content: "";
  position: absolute;
  inset: -40% -30%;
  background: linear-gradient(110deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));
  transform: translateX(-120%);
  pointer-events: none;
}

.share-card.flash::after {
  animation: shareSweep 620ms ease-out;
}

.share-card h3 {
  margin: 0;
  font-size: 18px;
}

.share-card p {
  margin: 0;
  font-size: 12px;
  color: #6f5232;
}

.settings-main-card {
  overflow: visible;
}

.settings-block {
  display: grid;
  gap: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(168, 116, 59, 0.24);
}

.settings-block:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.about-block h2 {
  margin: 0;
}

a {
  color: #f3ca7f;
  text-decoration: none;
}

.tabbar {
  border-top: 1px solid rgba(153, 180, 242, 0.2);
  background: rgba(8, 16, 32, 0.86);
  backdrop-filter: blur(18px);
  padding: 6px 8px calc(7px + var(--safe-bottom));
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 4px;
}

.tab {
  min-height: 46px;
  border-radius: 12px;
  background: transparent;
  color: #9bafcf;
  font-size: 12px;
  font-weight: 600;
  position: relative;
  overflow: hidden;
}

.tab.active {
  background: linear-gradient(135deg, rgba(243, 201, 119, 0.24), rgba(243, 201, 119, 0.08));
  color: #f9dfac;
  border: 1px solid rgba(243, 201, 119, 0.3);
  box-shadow: inset 0 1px 0 rgba(255, 244, 223, 0.28);
}

.tab.active::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(110deg, rgba(255, 255, 255, 0), rgba(255, 248, 232, 0.22), rgba(255, 255, 255, 0));
  transform: translateX(-120%);
  animation: tabSweep 620ms var(--ease-game);
  pointer-events: none;
}

dialog {
  border: none;
  padding: 0;
  background: transparent;
}

dialog::backdrop {
  background: rgba(23, 33, 52, 0.42);
  backdrop-filter: blur(2px) saturate(1.03);
}

.sheet-dialog {
  position: fixed;
  top: 0;
  left: 50%;
  margin: 0;
  transform: translateX(-50%);
  width: var(--app-frame-width);
  max-width: var(--app-frame-width);
  height: 100dvh;
  max-height: 100dvh;
  overflow: hidden;
}

.sheet-card {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    linear-gradient(180deg, rgba(244, 217, 170, 0.99), rgba(232, 191, 130, 0.98));
  border-radius: 22px 22px 0 0;
  border-top: 3px solid rgba(142, 89, 38, 0.55);
  border-left: 2px solid rgba(148, 96, 44, 0.2);
  border-right: 2px solid rgba(148, 96, 44, 0.2);
  padding: 9px 12px 13px;
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 8px;
  max-height: min(70vh, 560px);
  box-shadow:
    0 -14px 30px rgba(49, 30, 10, 0.3),
    inset 0 1px 0 rgba(255, 246, 221, 0.82),
    inset 0 0 0 1px rgba(150, 99, 46, 0.2);
  animation: sheetRise 240ms ease-out both;
}

.sheet-grabber {
  margin: 0 auto;
  width: 46px;
  height: 4px;
  border-radius: 999px;
  background: rgba(121, 80, 35, 0.5);
}

.sheet-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.sheet-head h2 {
  margin: 0;
  font-size: 19px;
  color: #4b3113;
  text-shadow: 0 1px 0 rgba(255, 244, 213, 0.86);
}

.sheet-content {
  overflow: auto;
  display: grid;
  gap: 8px;
  padding: 0 2px 2px 0;
  color: #51371a;
}

.sheet-content .search-item {
  min-height: 62px;
  padding-top: 9px;
  padding-bottom: 9px;
}

.sheet-footer {
  padding-top: 4px;
}

.sheet-load-more {
  width: 100%;
}

.dialog-card {
  width: min(90vw, 360px);
  border: 2px solid rgba(161, 109, 50, 0.58);
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(246, 226, 189, 0.98), rgba(232, 201, 149, 0.98));
  padding: 12px;
  display: grid;
  gap: 8px;
  color: #553919;
}

.dialog-card h2 {
  margin: 0;
  font-size: 16px;
}

.dialog-card p {
  margin: 0;
  font-size: 12px;
  color: #725432;
  line-height: 1.45;
}

.shell.burst-entry::after,
.shell.burst-progress::after,
.shell.burst-level::after {
  content: "";
  position: absolute;
  inset: 10% 8% auto;
  height: 150px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  animation: sparkBurst 640ms ease-out forwards;
}

.shell.burst-entry::after {
  background: radial-gradient(circle, rgba(243, 201, 119, 0.35), rgba(243, 201, 119, 0));
}

.shell.burst-progress::after {
  background: radial-gradient(circle, rgba(128, 170, 255, 0.35), rgba(128, 170, 255, 0));
}

.shell.burst-level::after {
  background: radial-gradient(circle, rgba(255, 217, 145, 0.5), rgba(255, 217, 145, 0));
}

.shell[data-height-alert="1"] .mini-card {
  opacity: 0.97;
}

.shell[data-overflow-level="1"] .entry-main-card,
.shell[data-overflow-level="1"] .panel-main-card {
  gap: 6px;
}

.shell[data-overflow-level="1"] .inline-actions-entry {
  gap: 6px;
}

.shell[data-overflow-level="1"] #entry-mode-hint,
.shell[data-overflow-level="1"] #entry-honor-card {
  display: none;
}

.shell[data-overflow-level="1"] .entry-main-card .feedback {
  min-height: 1.2em;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.shell[data-overflow-level="1"] .mini-card .item-sub {
  display: none;
}

.shell[data-overflow-level="2"] .inline-actions-entry {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.shell[data-overflow-level="2"] #entry-online-search-btn {
  grid-column: span 2;
}

.shell[data-overflow-level="2"] .quest-strip {
  padding: 6px 8px;
}

.shell[data-overflow-level="2"] .quest-sub:last-child {
  display: none;
}

.shell[data-overflow-level="2"] .entry-main-card .feedback,
.shell[data-overflow-level="2"] .entry-main-card .selection-sub,
.shell[data-overflow-level="2"] .entry-main-card .tip {
  display: none;
}

.shell[data-overflow-level="2"] .panel-core {
  padding: 6px 8px;
}

.shell[data-overflow-level="2"] .attribute-summary-list {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.shell[data-overflow-level="2"] .scroll-shelf {
  gap: 6px;
}

.shell[data-overflow-level="2"] .mini-card {
  padding: 8px;
}

.shell[data-overflow-level="2"] .panel-skills-card .skill-crest-sub {
  display: none;
}

.shell[data-overflow-level="3"] .entry-main-card .tip,
.shell[data-overflow-level="3"] .entry-main-card .feedback,
.shell[data-overflow-level="3"] .entry-main-card .selection-card,
.shell[data-overflow-level="3"] .entry-main-card #entry-search-results .search-item-sub,
.shell[data-overflow-level="3"] .entry-main-card #entry-search-results .search-empty {
  display: none;
}

.shell[data-overflow-level="3"] .quest-strip {
  display: none;
}

.shell[data-overflow-level="3"] .panel-summary-card .chip-list {
  display: none;
}

.shell[data-overflow-level="3"] .panel-skills-card .skill-crest {
  padding: 6px 8px;
}

.shell[data-overflow-level="4"] .entry-main-card #entry-search-results .search-item,
.shell[data-overflow-level="4"] .entry-main-card #entry-search-results .search-empty,
.shell[data-overflow-level="4"] .panel-summary-card .head-actions {
  display: none;
}

.shell[data-overflow-level="4"] .panel-scroll-card .scroll-detail {
  display: none;
}

.shell[data-overflow-level="4"] .panel-skills-card .panel-mini-label,
.shell[data-overflow-level="4"] .panel-skills-card #panel-achievement-list {
  display: none;
}

.shell[data-overflow-level="5"] .entry-main-card #entry-search-results,
.shell[data-overflow-level="5"] .entry-main-card .selection-card,
.shell[data-overflow-level="5"] .entry-main-card #entry-mode-hint,
.shell[data-overflow-level="5"] .entry-main-card #entry-feedback,
.shell[data-overflow-level="5"] .entry-main-card #entry-honor-card {
  display: none;
}

.shell[data-overflow-level="5"] .entry-main-card .inline-actions-entry {
  grid-template-columns: 1fr;
}

.shell[data-overflow-level="5"] .mini-card .item-sub,
.shell[data-overflow-level="5"] .mini-card .badge {
  display: none;
}

.shell[data-overflow-level="5"] .panel-main-card .scroll-sub,
.shell[data-overflow-level="5"] .panel-summary-card .panel-core,
.shell[data-overflow-level="5"] .panel-summary-card .chip-list {
  display: none;
}

.shell[data-overflow-level="5"] .panel-skills-card .skill-crest-sub {
  display: none;
}

.shell[data-overflow-level="5"] .panel-scroll-card::before,
.shell[data-overflow-level="5"] .panel-scroll-card::after {
  display: none;
}

.shell[data-density="compact"] .card,
.shell[data-density="tight"] .card,
.shell[data-density="ultra-tight"] .card {
  gap: 6px;
  padding: 9px;
}

.shell[data-density="compact"] input,
.shell[data-density="compact"] select,
.shell[data-density="compact"] button {
  min-height: 36px;
}

.shell[data-density="tight"] input,
.shell[data-density="tight"] select,
.shell[data-density="tight"] button,
.shell[data-density="ultra-tight"] input,
.shell[data-density="ultra-tight"] select,
.shell[data-density="ultra-tight"] button {
  min-height: 34px;
}

.shell[data-density="tight"] .text-btn,
.shell[data-density="ultra-tight"] .text-btn {
  min-height: 24px;
  font-size: 11px;
}

.shell[data-density="tight"] .tab,
.shell[data-density="ultra-tight"] .tab {
  min-height: 40px;
  font-size: 11px;
}

.shell[data-density="tight"] .tabbar,
.shell[data-density="ultra-tight"] .tabbar {
  padding: 5px 6px calc(6px + var(--safe-bottom));
}

.shell[data-density="ultra-tight"] .tip,
.shell[data-density="ultra-tight"] .feedback,
.shell[data-density="tight"] .tip,
.shell[data-density="tight"] .feedback {
  font-size: 10px;
}

@keyframes feedbackPulse {
  0% {
    transform: scale(1);
    opacity: 0.75;
  }
  60% {
    transform: scale(1.02);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes starsDrift {
  0% {
    transform: translateY(0);
    opacity: 0.45;
  }
  50% {
    transform: translateY(-6px);
    opacity: 0.64;
  }
  100% {
    transform: translateY(0);
    opacity: 0.45;
  }
}

@keyframes sparkParticle {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(calc(-50% + var(--dx, 0px)), calc(-50% + var(--dy, 0px))) scale(0.3);
  }
}

@keyframes itemRise {
  0% {
    transform: translateY(6px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes cardSettle {
  0% {
    transform: translateY(7px);
    opacity: 0.92;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes selectionPulse {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  45% {
    transform: scale(1.01);
    filter: brightness(1.1);
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

@keyframes armedPulse {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(1.015);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes scrollUnfold {
  0% {
    transform: translateY(4px) scale(0.99);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

@keyframes scrollPulse {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(1.008);
    box-shadow:
      inset 0 1px 0 rgba(255, 248, 229, 0.2),
      inset 0 -12px 20px rgba(9, 16, 29, 0.36),
      0 12px 24px rgba(2, 11, 24, 0.5);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes skillStarPulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
    box-shadow: 0 0 0 rgba(243, 201, 119, 0);
  }
  40% {
    transform: translate(-50%, -50%) scale(1.08);
    box-shadow: 0 0 20px rgba(243, 201, 119, 0.52);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    box-shadow: 0 0 0 rgba(243, 201, 119, 0);
  }
}

@keyframes sheetRise {
  0% {
    transform: translateY(22px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes viewEnter {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes sparkBurst {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  25% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: scale(1.3);
  }
}

@keyframes shareSweep {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(120%);
  }
}

@keyframes tabSweep {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(140%);
  }
}

/* v1.7 wood-scroll farmland refinement */
:root {
  color-scheme: light;
  --bg-deep: #d2a670;
  --bg-mid: #e6c58e;
  --bg-glow: rgba(255, 222, 153, 0.42);
  --card: rgba(253, 236, 199, 0.93);
  --card-strong: rgba(255, 242, 214, 0.98);
  --card-soft: rgba(142, 93, 40, 0.14);
  --line: rgba(130, 82, 36, 0.34);
  --line-strong: rgba(160, 97, 45, 0.58);
  --text: #4d3318;
  --text-muted: #6f4b27;
  --brand: #e5ae63;
  --brand-soft: rgba(229, 174, 99, 0.24);
  --accent: #4f8fd2;
  --success: #79c93f;
  --danger: #be4d44;
}

body {
  background:
    radial-gradient(circle at 14% -15%, rgba(255, 243, 209, 0.78), rgba(255, 243, 209, 0) 42%),
    radial-gradient(circle at 86% -10%, rgba(190, 225, 255, 0.42), rgba(190, 225, 255, 0) 38%),
    linear-gradient(180deg, #dcb782 0%, #e9cc9d 40%, #e5c08a 100%);
}

.shell {
  background:
    radial-gradient(circle at 50% -30%, rgba(255, 236, 188, 0.44), rgba(255, 236, 188, 0)),
    linear-gradient(180deg, rgba(139, 190, 102, 0.2), rgba(139, 190, 102, 0)),
    linear-gradient(180deg, #dfbc89 0%, #e9cfaa 40%, #dec08c 100%);
}

.fx-grid {
  background:
    linear-gradient(90deg, rgba(111, 78, 44, 0.08) 1px, transparent 1px),
    linear-gradient(0deg, rgba(111, 78, 44, 0.08) 1px, transparent 1px),
    radial-gradient(circle at 30% -20%, rgba(255, 236, 188, 0.35), rgba(255, 236, 188, 0));
}

.fx-stars {
  opacity: 0.1;
}

.fx-halo {
  background: radial-gradient(circle at 50% 20%, rgba(147, 200, 104, 0.32), rgba(147, 200, 104, 0));
  opacity: 0.36;
}

.shell::before {
  border: 1px solid rgba(148, 98, 47, 0.22);
}

.card {
  background:
    radial-gradient(circle at 12% 8%, rgba(255, 249, 233, 0.6), rgba(255, 249, 233, 0)),
    linear-gradient(180deg, rgba(253, 237, 205, 0.96), rgba(242, 216, 169, 0.95));
  border: 1px solid rgba(150, 99, 48, 0.34);
  box-shadow:
    inset 0 1px 0 rgba(255, 251, 242, 0.86),
    inset 0 -10px 14px rgba(145, 104, 57, 0.12),
    0 10px 18px rgba(96, 63, 30, 0.18);
}

.quest-strip {
  border: 1px solid rgba(162, 104, 46, 0.4);
  background:
    linear-gradient(120deg, rgba(255, 230, 180, 0.72), rgba(245, 210, 149, 0.55)),
    rgba(248, 224, 183, 0.82);
}

.quest-title,
.quest-sub {
  color: #6d4b24;
}

.world-status .badge {
  background:
    linear-gradient(180deg, rgba(255, 246, 220, 0.96), rgba(243, 221, 180, 0.93)),
    repeating-linear-gradient(
      90deg,
      rgba(173, 127, 79, 0.1) 0,
      rgba(173, 127, 79, 0.1) 1px,
      transparent 1px,
      transparent 7px
    );
  border-color: rgba(149, 98, 47, 0.44);
  color: #5a3d1b;
  box-shadow: inset 0 1px 0 rgba(255, 251, 241, 0.75);
}

.world-action-btn {
  border: 1px solid rgba(132, 82, 34, 0.52);
  background:
    linear-gradient(180deg, rgba(66, 114, 68, 0.96), rgba(50, 95, 52, 0.96)),
    linear-gradient(125deg, rgba(255, 241, 210, 0.14), rgba(255, 241, 210, 0));
  color: #f7f5e8;
  box-shadow:
    inset 0 1px 0 rgba(233, 255, 207, 0.3),
    inset 0 -1px 0 rgba(23, 58, 24, 0.4),
    0 7px 14px rgba(74, 47, 22, 0.24);
}

#world-share-btn {
  background:
    linear-gradient(180deg, rgba(66, 114, 160, 0.96), rgba(49, 87, 133, 0.96)),
    linear-gradient(125deg, rgba(255, 241, 210, 0.14), rgba(255, 241, 210, 0));
}

.world-hud {
  bottom: calc(12px + var(--safe-bottom));
}

#world-zone-hint {
  border: 1px solid rgba(248, 218, 158, 0.36);
  background:
    linear-gradient(180deg, rgba(37, 58, 78, 0.86), rgba(29, 49, 68, 0.84)),
    repeating-linear-gradient(
      90deg,
      rgba(249, 230, 188, 0.09) 0,
      rgba(249, 230, 188, 0.09) 1px,
      transparent 1px,
      transparent 6px
    );
  color: #f8ecd1;
}

label {
  color: #644426;
}

input,
select,
textarea {
  border-color: rgba(162, 108, 53, 0.4);
  background:
    linear-gradient(180deg, rgba(255, 247, 226, 0.96), rgba(248, 234, 202, 0.94)),
    repeating-linear-gradient(
      0deg,
      rgba(181, 136, 80, 0.08) 0,
      rgba(181, 136, 80, 0.08) 1px,
      transparent 1px,
      transparent 6px
    );
}

.btn-primary {
  color: #1e3812;
  background:
    linear-gradient(180deg, #9be45a 0%, #7fcd43 55%, #66b232 100%);
  border: 1px solid rgba(72, 109, 33, 0.58);
}

.btn-secondary {
  background:
    linear-gradient(180deg, rgba(255, 241, 208, 0.96), rgba(243, 218, 173, 0.92));
  border-color: rgba(151, 99, 46, 0.48);
}

.btn-ghost {
  background:
    linear-gradient(180deg, rgba(93, 113, 136, 0.9), rgba(77, 98, 121, 0.92));
  border-color: rgba(205, 223, 245, 0.38);
}

.btn-danger {
  background: linear-gradient(180deg, rgba(206, 88, 83, 0.96), rgba(169, 62, 54, 0.96));
  border-color: rgba(255, 211, 204, 0.46);
}

.search-item,
.item,
.selection-card,
.reflection-item,
.share-card,
.panel-core,
.sheet-world-recent {
  border-color: rgba(156, 101, 46, 0.36);
  background:
    radial-gradient(circle at 8% 10%, rgba(255, 251, 238, 0.45), rgba(255, 251, 238, 0)),
    linear-gradient(180deg, rgba(255, 245, 221, 0.94), rgba(244, 224, 184, 0.9));
}

.scroll-card,
.panel-scroll-card {
  border-color: rgba(126, 83, 39, 0.48);
  background:
    radial-gradient(circle at 10% 8%, rgba(255, 240, 201, 0.18), rgba(255, 240, 201, 0)),
    linear-gradient(180deg, rgba(91, 62, 31, 0.94), rgba(70, 45, 22, 0.96));
}

dialog::backdrop {
  background: rgba(19, 19, 14, 0.48);
  backdrop-filter: blur(3px) saturate(1.02);
}

.sheet-card {
  background:
    radial-gradient(circle at 50% -30%, rgba(255, 245, 216, 0.62), rgba(255, 245, 216, 0)),
    linear-gradient(180deg, rgba(245, 217, 164, 0.99), rgba(233, 193, 128, 0.98));
  border-radius: 24px 24px 0 0;
  border-top: 3px solid rgba(145, 89, 34, 0.62);
  border-left: 2px solid rgba(151, 97, 43, 0.28);
  border-right: 2px solid rgba(151, 97, 43, 0.28);
  max-height: min(78vh, 660px);
}

.sheet-head h2 {
  color: #5a3a18;
  padding: 3px 10px;
  border-radius: 999px;
  border: 1px solid rgba(158, 101, 47, 0.44);
  background: linear-gradient(180deg, rgba(255, 245, 215, 0.92), rgba(243, 219, 176, 0.9));
}

#sheet-close-btn {
  min-height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(117, 77, 37, 0.34);
  background: linear-gradient(180deg, rgba(100, 125, 151, 0.94), rgba(83, 106, 131, 0.92));
  color: #f8f3e9;
}

.dialog-card {
  border: 2px solid rgba(151, 96, 41, 0.58);
  background:
    radial-gradient(circle at 20% 12%, rgba(255, 245, 215, 0.62), rgba(255, 245, 215, 0)),
    linear-gradient(180deg, rgba(248, 230, 193, 0.98), rgba(236, 205, 151, 0.98));
}

/* v1.8 wood-scroll farm polish */
:root {
  --ui-wood-deep: #6f4926;
  --ui-wood-mid: #98653a;
  --ui-paper-light: #fff4dd;
  --ui-paper-mid: #f2d5a1;
}

.world-head {
  top: calc(8px + var(--safe-top));
}

.world-overview {
  top: calc(58px + var(--safe-top));
}

.world-status .badge {
  border-width: 2px;
  font-weight: 700;
  letter-spacing: 0.02em;
}

.world-overview-chip {
  font-weight: 700;
  border-width: 2px;
  border-radius: 10px;
  min-height: 30px;
  max-width: min(100%, 238px);
}

.world-action-btn {
  min-height: 38px;
  min-width: 74px;
  border-radius: 12px;
  font-weight: 700;
  letter-spacing: 0.02em;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.world-action-btn::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: linear-gradient(180deg, rgba(255, 240, 206, 0.98), rgba(250, 220, 158, 0.94));
  box-shadow: 0 0 0 1px rgba(80, 54, 25, 0.3);
}

.world-action-btn[data-action="entry"] {
  background:
    linear-gradient(180deg, rgba(67, 133, 69, 0.97), rgba(46, 108, 48, 0.97)),
    linear-gradient(125deg, rgba(255, 241, 210, 0.14), rgba(255, 241, 210, 0));
}

.world-action-btn[data-action="entry"]::before {
  background: linear-gradient(180deg, rgba(255, 245, 220, 0.98), rgba(211, 248, 173, 0.94));
}

.world-action-btn[data-action="share"] {
  background:
    linear-gradient(180deg, rgba(65, 122, 177, 0.97), rgba(49, 93, 142, 0.97)),
    linear-gradient(125deg, rgba(255, 241, 210, 0.14), rgba(255, 241, 210, 0));
}

.world-action-btn[data-action="share"]::before {
  background: linear-gradient(180deg, rgba(255, 245, 220, 0.98), rgba(194, 225, 255, 0.94));
}

.world-action-btn:focus-visible {
  box-shadow:
    0 0 0 2px rgba(255, 243, 211, 0.72),
    0 8px 16px rgba(74, 47, 22, 0.28),
    inset 0 1px 0 rgba(233, 255, 207, 0.3);
}

#world-zone-hint {
  border-radius: 12px;
  padding: 10px 14px;
  font-size: 13px;
  line-height: 1.35;
  text-shadow: 0 1px 0 rgba(14, 20, 31, 0.6);
}

.card-head h2 {
  letter-spacing: 0.02em;
}

.card-head h2::after {
  content: "";
  display: block;
  width: 44px;
  height: 3px;
  margin-top: 5px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(200, 138, 66, 0.8), rgba(244, 204, 139, 0.38));
}

.btn-primary,
.btn-secondary,
.btn-ghost,
.btn-danger {
  border-width: 2px;
  border-style: solid;
  border-radius: 13px;
  box-shadow:
    inset 0 1px 0 rgba(255, 251, 239, 0.45),
    0 7px 14px rgba(74, 47, 22, 0.22);
}

.btn-primary {
  color: #224112;
  text-shadow: 0 1px 0 rgba(233, 248, 212, 0.7);
}

.btn-secondary {
  color: #5e3e1e;
}

.btn-ghost {
  color: #eef4ff;
}

.selection-pill,
.selection-card,
.sheet-world-recent,
.share-card,
.panel-core,
.settings-block {
  border-width: 2px;
}

.search-item {
  min-height: 76px;
  border-width: 2px;
  border-radius: 14px;
}

.search-item-title {
  white-space: normal;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  min-height: 2.8em;
}

.search-item-sub {
  white-space: normal;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.sheet-card {
  position: absolute;
  overflow: hidden;
  max-height: min(82vh, 700px);
  padding: 11px 14px 14px;
  border-top-width: 4px;
}

.sheet-card::before,
.sheet-card::after {
  content: "";
  position: absolute;
  top: 58px;
  bottom: 12px;
  width: 8px;
  border-radius: 999px;
  border: 1px solid rgba(121, 77, 34, 0.48);
  background:
    linear-gradient(180deg, rgba(177, 124, 67, 0.96), rgba(131, 87, 42, 0.98)),
    repeating-linear-gradient(
      0deg,
      rgba(255, 223, 168, 0.2) 0,
      rgba(255, 223, 168, 0.2) 1px,
      transparent 1px,
      transparent 7px
    );
  box-shadow: inset 0 1px 0 rgba(255, 233, 194, 0.28);
  pointer-events: none;
}

.sheet-card::before {
  left: 6px;
}

.sheet-card::after {
  right: 6px;
}

.sheet-head {
  padding: 0 12px;
}

.sheet-head-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.sheet-head h2 {
  font-size: 21px;
  font-weight: 700;
  border-width: 2px;
  box-shadow:
    inset 0 1px 0 rgba(255, 248, 226, 0.76),
    0 4px 9px rgba(114, 73, 33, 0.18);
}

#sheet-back-btn,
#sheet-close-btn {
  min-height: 38px;
  border-radius: 12px;
  border-width: 2px;
  font-weight: 700;
}

#sheet-back-btn {
  min-width: 72px;
  border-color: rgba(111, 73, 35, 0.36);
  background: linear-gradient(180deg, rgba(155, 116, 68, 0.94), rgba(125, 88, 49, 0.95));
  color: #fff5de;
}

#sheet-back-btn[hidden] {
  display: none;
}

.sheet-content {
  padding: 0 8px 6px;
  gap: 10px;
}

.sheet-content .search-results {
  gap: 8px;
}

.sheet-content .item,
.sheet-content .reflection-item,
.sheet-content .search-item {
  border-width: 2px;
}

.sheet-world-settings .settings-block {
  padding-bottom: 12px;
  border-bottom-width: 2px;
}

.share-card h3 {
  letter-spacing: 0.03em;
}

.share-card::before {
  content: "";
  position: absolute;
  top: 10px;
  right: 10px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid rgba(169, 118, 58, 0.54);
  background:
    radial-gradient(circle at 35% 35%, rgba(255, 234, 193, 0.86), rgba(235, 198, 134, 0.94)),
    linear-gradient(180deg, rgba(204, 149, 83, 0.86), rgba(149, 102, 49, 0.92));
  box-shadow:
    inset 0 1px 0 rgba(255, 248, 232, 0.72),
    0 4px 10px rgba(98, 64, 27, 0.24);
  pointer-events: none;
}

.dialog-card {
  border-width: 3px;
  border-radius: 18px;
  box-shadow:
    0 18px 30px rgba(61, 39, 14, 0.25),
    inset 0 1px 0 rgba(255, 247, 225, 0.8);
}

@media (max-width: 360px) {
  .field-grid.two,
  .inline-actions {
    grid-template-columns: 1fr;
  }

  .inline-actions-entry,
  .shell[data-overflow-level="2"] .inline-actions-entry {
    grid-template-columns: 1fr;
  }

  .shell[data-overflow-level="2"] #entry-online-search-btn {
    grid-column: auto;
  }

  .view.active {
    padding-bottom: 10px;
  }

  .world-action-btn {
    min-width: 64px;
    min-height: 34px;
    font-size: 12px;
  }

  .world-overview {
    top: calc(52px + var(--safe-top));
    gap: 6px;
  }

  .world-overview-chip {
    font-size: 11px;
    max-width: min(100%, 214px);
  }

  .sheet-head h2 {
    font-size: 18px;
  }

  .sheet-card {
    max-height: 86vh;
  }
}

/* v1.9 skill-driven art pass (game-art + 2d-games) */
:root {
  --ui-wood-dark: #5d3d1f;
  --ui-wood-medium: #8a5b30;
  --ui-wood-light: #c08b51;
  --ui-paper-cream: #fff5df;
  --ui-paper-warm: #f3ddb1;
  --ui-ink-strong: #4a2f15;
  --ui-ink-soft: #6d4b29;
  --ui-shadow: rgba(78, 47, 18, 0.28);
}

body {
  background:
    radial-gradient(circle at 12% -12%, rgba(255, 243, 211, 0.84), rgba(255, 243, 211, 0) 42%),
    radial-gradient(circle at 88% -18%, rgba(205, 228, 255, 0.52), rgba(205, 228, 255, 0) 40%),
    repeating-linear-gradient(
      90deg,
      rgba(161, 111, 57, 0.05) 0,
      rgba(161, 111, 57, 0.05) 1px,
      rgba(255, 255, 255, 0) 1px,
      rgba(255, 255, 255, 0) 16px
    ),
    linear-gradient(180deg, #ddbb8a 0%, #e9cea0 42%, #e2bd86 100%);
}

.shell {
  background:
    radial-gradient(circle at 50% -24%, rgba(255, 242, 201, 0.55), rgba(255, 242, 201, 0)),
    linear-gradient(180deg, rgba(139, 190, 102, 0.2), rgba(139, 190, 102, 0)),
    linear-gradient(180deg, #dfbc89 0%, #ead1a9 40%, #deb987 100%);
}

.card {
  border: 2px solid rgba(150, 99, 48, 0.42);
  border-radius: 18px;
  box-shadow:
    inset 0 1px 0 rgba(255, 251, 242, 0.9),
    inset 0 -10px 14px rgba(145, 104, 57, 0.14),
    0 12px 20px rgba(96, 63, 30, 0.2);
}

.world-status .badge,
.world-overview-chip {
  border-width: 2px;
  border-radius: 11px;
  backdrop-filter: blur(3px);
  font-weight: 700;
}

.world-overview-chip {
  background:
    linear-gradient(180deg, rgba(255, 246, 219, 0.97), rgba(243, 219, 176, 0.93)),
    repeating-linear-gradient(
      90deg,
      rgba(168, 119, 61, 0.08) 0,
      rgba(168, 119, 61, 0.08) 1px,
      transparent 1px,
      transparent 8px
    );
  color: var(--ui-ink-soft);
}

.world-action-btn,
#sheet-back-btn,
#sheet-close-btn,
.btn-primary,
.btn-secondary,
.btn-ghost,
.btn-danger {
  border-width: 2px;
  border-style: solid;
  font-weight: 700;
  letter-spacing: 0.01em;
  box-shadow:
    inset 0 1px 0 rgba(255, 252, 241, 0.5),
    0 7px 14px rgba(74, 47, 22, 0.24);
}

.world-action-btn {
  min-height: 40px;
  min-width: 78px;
  border-radius: 12px;
}

.world-action-btn:hover,
.world-action-btn:focus-visible {
  transform: translateY(-1px);
}

#world-entry-btn {
  border-color: rgba(59, 105, 37, 0.64);
  background:
    linear-gradient(180deg, rgba(78, 146, 80, 0.98), rgba(54, 113, 56, 0.99)),
    linear-gradient(120deg, rgba(255, 247, 221, 0.16), rgba(255, 247, 221, 0));
}

#world-share-btn {
  border-color: rgba(63, 95, 141, 0.62);
  background:
    linear-gradient(180deg, rgba(76, 132, 189, 0.98), rgba(55, 102, 151, 0.99)),
    linear-gradient(120deg, rgba(255, 247, 221, 0.16), rgba(255, 247, 221, 0));
}

#world-zone-hint {
  border-width: 2px;
  border-color: rgba(248, 218, 158, 0.46);
  background:
    linear-gradient(180deg, rgba(31, 53, 75, 0.9), rgba(24, 44, 64, 0.9)),
    repeating-linear-gradient(
      90deg,
      rgba(249, 230, 188, 0.1) 0,
      rgba(249, 230, 188, 0.1) 1px,
      transparent 1px,
      transparent 8px
    );
  color: #f9efdd;
  text-shadow: 0 1px 0 rgba(18, 30, 46, 0.72);
}

.sheet-card {
  max-height: min(86vh, 760px);
  border-top-width: 4px;
  border-left-width: 2px;
  border-right-width: 2px;
  box-shadow:
    0 -16px 34px rgba(49, 30, 10, 0.32),
    inset 0 1px 0 rgba(255, 246, 221, 0.86),
    inset 0 0 0 1px rgba(150, 99, 46, 0.22);
}

.sheet-head h2 {
  color: var(--ui-ink-strong);
  font-weight: 700;
  letter-spacing: 0.02em;
}

#sheet-back-btn {
  border-color: rgba(111, 73, 35, 0.42);
  background: linear-gradient(180deg, rgba(155, 116, 68, 0.97), rgba(125, 88, 49, 0.98));
  color: #fff5de;
}

#sheet-close-btn {
  border-color: rgba(75, 103, 137, 0.45);
  background: linear-gradient(180deg, rgba(104, 132, 161, 0.96), rgba(84, 108, 132, 0.98));
  color: #f8f3e9;
}

.sheet-content {
  scrollbar-width: thin;
  scrollbar-color: rgba(145, 92, 43, 0.66) rgba(244, 220, 177, 0.44);
}

.sheet-content::-webkit-scrollbar {
  width: 9px;
}

.sheet-content::-webkit-scrollbar-track {
  border-radius: 999px;
  background: rgba(242, 214, 163, 0.46);
}

.sheet-content::-webkit-scrollbar-thumb {
  border-radius: 999px;
  border: 2px solid rgba(242, 214, 163, 0.46);
  background: linear-gradient(180deg, rgba(178, 121, 64, 0.92), rgba(139, 91, 45, 0.94));
}

.search-item,
.item,
.selection-card,
.reflection-item,
.share-card,
.panel-core,
.sheet-world-recent {
  border-width: 2px;
}

.search-item {
  min-height: 80px;
  border-radius: 14px;
}

.search-item-title {
  min-height: 2.8em;
  line-height: 1.4;
  color: #4f3316;
}

.search-item-sub {
  line-height: 1.35;
  color: #6f5132;
}

.sheet-world-entry .search-results {
  max-height: min(32vh, 320px);
}

.shelf-scroll-grid {
  grid-template-columns: repeat(auto-fit, minmax(182px, 1fr));
  gap: 12px;
}

.scroll-card-portrait {
  min-height: 304px;
  border: 2px solid rgba(187, 136, 74, 0.54);
}

.scroll-card-portrait-paper {
  border: 2px solid rgba(170, 120, 62, 0.46);
  position: relative;
}

.scroll-card-portrait-paper::before {
  content: "";
  position: absolute;
  left: 8px;
  right: 8px;
  top: 8px;
  height: 48%;
  border-radius: 8px;
  background: linear-gradient(180deg, rgba(255, 249, 235, 0.62), rgba(255, 249, 235, 0));
  pointer-events: none;
}

.scroll-title-portrait {
  color: #3a220d;
  font-weight: 800;
  letter-spacing: 0.01em;
  text-shadow: 0 1px 0 rgba(255, 248, 232, 0.76);
}

.scroll-sub-portrait {
  color: #5a3d1f;
  font-weight: 600;
}

.scroll-percent-portrait {
  color: #6d4a24;
  font-weight: 600;
}

.scroll-track {
  border: 1px solid rgba(131, 97, 55, 0.26);
}

.scroll-badge-portrait {
  border-width: 2px;
  background: rgba(255, 248, 231, 0.96);
  color: #5e3e1d;
}

.skill-star-map {
  min-height: 286px;
  border-width: 2px;
  background:
    repeating-linear-gradient(
      to top,
      rgba(165, 119, 66, 0.1) 0,
      rgba(165, 119, 66, 0.1) 1px,
      transparent 1px,
      transparent calc(100% / max(1, var(--skill-tier-count, 5)))
    ),
    repeating-linear-gradient(
      to right,
      rgba(160, 114, 62, 0.08) 0,
      rgba(160, 114, 62, 0.08) 1px,
      transparent 1px,
      transparent calc(100% / max(1, var(--skill-path-count, 4)))
    ),
    radial-gradient(circle at 48% 52%, rgba(123, 163, 240, 0.24), rgba(123, 163, 240, 0)),
    rgba(255, 245, 220, 0.8);
}

.skill-star-node {
  width: clamp(74px, 18vw, 100px);
  min-height: clamp(48px, 10vw, 60px);
  border-width: 2px;
  border-radius: 13px;
  box-shadow:
    inset 0 1px 0 rgba(255, 250, 239, 0.78),
    0 5px 10px rgba(99, 63, 28, 0.14);
}

.skill-star-name {
  font-weight: 700;
  color: #5f4020;
}

.skill-star-node.unlocked {
  box-shadow:
    inset 0 1px 0 rgba(238, 255, 212, 0.72),
    0 8px 14px rgba(108, 156, 59, 0.22);
}

.skill-star-node.path-insight {
  background: linear-gradient(165deg, rgba(236, 247, 255, 0.92), rgba(245, 229, 203, 0.9));
}

.skill-star-node.path-will {
  background: linear-gradient(165deg, rgba(241, 236, 255, 0.92), rgba(245, 229, 203, 0.9));
}

.skill-star-node.path-logic {
  background: linear-gradient(165deg, rgba(236, 251, 236, 0.92), rgba(245, 229, 203, 0.9));
}

.skill-star-node.path-strategy {
  background: linear-gradient(165deg, rgba(255, 241, 224, 0.92), rgba(245, 229, 203, 0.9));
}

.skill-star-tier {
  font-weight: 700;
}

.temple-world-panel {
  gap: 12px;
}

.temple-profile-card {
  display: grid;
  gap: 8px;
  padding: 12px;
}

.temple-profile-card p {
  margin: 0;
}

.temple-quick-stats {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.temple-stat-chip {
  border: 2px solid rgba(155, 101, 47, 0.36);
  border-radius: 12px;
  padding: 8px 10px;
  background:
    radial-gradient(circle at 14% 10%, rgba(255, 252, 239, 0.58), rgba(255, 252, 239, 0)),
    linear-gradient(180deg, rgba(255, 245, 218, 0.93), rgba(243, 221, 182, 0.9));
  display: grid;
  gap: 4px;
}

.temple-stat-label {
  margin: 0;
  font-size: 11px;
  color: #7a5632;
}

.temple-stat-chip strong {
  font-size: 14px;
  line-height: 1.28;
  color: #4f3115;
}

.temple-section {
  border: 2px solid rgba(154, 102, 49, 0.36);
  border-radius: 14px;
  padding: 10px;
  background:
    radial-gradient(circle at 12% 10%, rgba(255, 249, 232, 0.45), rgba(255, 249, 232, 0)),
    linear-gradient(180deg, rgba(253, 243, 216, 0.9), rgba(239, 214, 168, 0.83));
  display: grid;
  gap: 8px;
}

.temple-section .card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.temple-section .card-head h3 {
  margin: 0;
  font-size: 18px;
  color: #4e3014;
}

.temple-attrs-section .attribute-list {
  margin-top: 2px;
}

.skill-path-legend-list {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.skill-path-legend {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  min-height: 30px;
  border: 1px solid rgba(154, 102, 48, 0.28);
  border-radius: 999px;
  padding: 0 10px;
  font-size: 11px;
  color: #5f401f;
  background: rgba(255, 248, 227, 0.78);
}

.skill-path-dot {
  width: 9px;
  height: 9px;
  border-radius: 50%;
  box-shadow: 0 0 0 1px rgba(93, 61, 32, 0.25);
}

.skill-path-legend.path-insight .skill-path-dot {
  background: #7ea9f3;
}

.skill-path-legend.path-will .skill-path-dot {
  background: #a58ef0;
}

.skill-path-legend.path-logic .skill-path-dot {
  background: #8cc78f;
}

.skill-path-legend.path-strategy .skill-path-dot {
  background: #dfae72;
}

.temple-skill-map-section .skill-star-map {
  min-height: 302px;
}

.temple-world-panel .skill-star-node {
  width: clamp(70px, 16vw, 92px);
  min-height: clamp(48px, 10vw, 58px);
  padding: 14px 5px 6px;
}

.temple-world-panel .skill-star-tier {
  top: 3px;
  right: 5px;
}

.temple-world-panel .skill-star-name {
  font-size: clamp(10px, 2.2vw, 11px);
  line-height: 1.22;
  min-height: 2.44em;
}

.temple-path-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.temple-path-card {
  border: 1px solid rgba(156, 106, 52, 0.3);
  border-radius: 12px;
  padding: 8px;
  background: rgba(255, 245, 218, 0.84);
  display: grid;
  gap: 6px;
}

.temple-path-head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
  color: #57391b;
  font-size: 12px;
}

.temple-path-track {
  height: 7px;
  border-radius: 999px;
  background: rgba(96, 117, 150, 0.26);
  overflow: hidden;
}

.temple-path-fill {
  display: block;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, rgba(109, 144, 248, 0.92), rgba(242, 194, 108, 0.95));
}

.temple-path-card .tip {
  margin: 0;
  color: #6a4a28;
  line-height: 1.35;
  font-size: 11px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.temple-path-card.path-insight .temple-path-fill {
  background: linear-gradient(90deg, rgba(111, 156, 255, 0.92), rgba(167, 206, 255, 0.92));
}

.temple-path-card.path-will .temple-path-fill {
  background: linear-gradient(90deg, rgba(144, 124, 245, 0.92), rgba(208, 166, 246, 0.92));
}

.temple-path-card.path-logic .temple-path-fill {
  background: linear-gradient(90deg, rgba(117, 188, 134, 0.92), rgba(181, 219, 133, 0.92));
}

.temple-path-card.path-strategy .temple-path-fill {
  background: linear-gradient(90deg, rgba(231, 177, 112, 0.94), rgba(250, 208, 125, 0.94));
}

.temple-path-section .skill-lane-progress {
  margin-top: 2px;
}

.temple-path-section .skill-lane-card {
  min-height: 108px;
}

.temple-path-section .skill-lane-card .tip {
  margin: 0;
  color: #694727;
  line-height: 1.32;
  font-size: 11px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.temple-achievement-section .chip-list + .chip-list {
  margin-top: 4px;
}

.temple-actions {
  margin-top: 2px;
}

@media (min-width: 1000px) {
  .sheet-card {
    max-height: min(88vh, 820px);
  }

  .sheet-content {
    padding: 0 10px 8px;
  }

  .shelf-scroll-grid {
    grid-template-columns: repeat(auto-fit, minmax(190px, 224px));
    justify-content: center;
  }

  .bookshelf-rack {
    gap: 14px;
    padding: 12px;
  }

  .bookshelf-row {
    gap: 10px;
    padding: 12px 12px 18px;
  }

  .bookshelf-book {
    min-height: 244px;
  }

  .temple-quick-stats {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .skill-path-legend-list {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .temple-path-grid {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .temple-path-section .skill-lane-progress {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .temple-skill-map-section .skill-star-map {
    min-height: 330px;
  }

  .temple-world-panel .skill-star-node {
    width: clamp(74px, 8vw, 96px);
  }
}

@media (max-width: 430px) {
  .sheet-card {
    max-height: 87vh;
    padding: 10px 12px 12px;
  }

  .sheet-head {
    padding: 0 8px;
  }

  .sheet-head h2 {
    font-size: 17px;
  }

  #sheet-back-btn,
  #sheet-close-btn {
    min-height: 34px;
    min-width: 64px;
    border-radius: 10px;
    font-size: 12px;
  }

  .search-item {
    min-height: 74px;
  }

  .sheet-world-entry .search-results {
    max-height: min(30vh, 286px);
  }

  .shelf-scroll-grid {
    grid-template-columns: repeat(auto-fit, minmax(156px, 1fr));
    gap: 10px;
  }

  .scroll-card-portrait {
    min-height: 284px;
  }

  .bookshelf-head-title {
    font-size: 15px;
  }

  .bookshelf-head-sub,
  .bookshelf-head-meta {
    font-size: 10px;
  }

  .bookshelf-filter {
    gap: 5px;
  }

  .bookshelf-filter-btn {
    min-height: 44px;
    padding: 0 10px;
    font-size: 11px;
  }

  .bookshelf-rack {
    padding: 8px;
    gap: 10px;
  }

  .bookshelf-row {
    gap: 7px;
    padding: 8px 8px 14px;
  }

  .bookshelf-book {
    min-height: 236px;
    padding: 7px 7px 9px;
  }

  .bookshelf-book-paper {
    padding: 8px 7px 7px;
    gap: 5px;
  }

  .bookshelf-book-title {
    font-size: 12px;
    line-height: 1.3;
    -webkit-line-clamp: 3;
  }

  .bookshelf-book-meta {
    font-size: 10px;
    line-height: 1.24;
    -webkit-line-clamp: 3;
    min-height: calc(1.24em * 2);
  }

  .bookshelf-book-progress {
    font-size: 10px;
    line-height: 1.2;
  }

  .bookshelf-book-status {
    font-size: 10px;
    padding: 1px 6px;
  }

  .bookshelf-book-actions {
    gap: 5px;
  }

  .bookshelf-book-open-btn,
  .bookshelf-book-edit-btn {
    min-height: 36px;
    font-size: 10px;
    padding: 0 4px;
  }

  .bookshelf-pagination {
    gap: 6px;
  }

  .bookshelf-page-btn {
    min-height: 42px;
    font-size: 12px;
  }

  .temple-profile-card {
    padding: 9px;
  }

  .temple-stat-chip {
    padding: 7px 8px;
  }

  .temple-stat-chip strong {
    font-size: 12px;
  }

  .temple-section {
    padding: 8px;
  }

  .temple-section .card-head h3 {
    font-size: 16px;
  }

  .skill-path-legend-list {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 5px;
  }

  .skill-path-legend {
    min-height: 28px;
    padding: 0 8px;
    font-size: 10px;
  }

  .temple-skill-map-section .skill-star-map {
    min-height: 252px;
  }

  .temple-world-panel .skill-star-node {
    width: clamp(58px, 22vw, 76px);
    min-height: clamp(42px, 11vw, 52px);
    padding: 12px 4px 5px;
  }

  .temple-world-panel .skill-star-name {
    font-size: clamp(8.6px, 2.9vw, 9.8px);
    min-height: 2.2em;
  }

  .temple-path-grid {
    grid-template-columns: 1fr;
  }

  .temple-path-section .skill-lane-progress {
    grid-template-columns: 1fr;
  }

  .temple-actions {
    grid-template-columns: 1fr;
  }

  .skill-star-map {
    min-height: 258px;
  }

  .skill-star-node {
    width: clamp(62px, 21vw, 84px);
    min-height: clamp(44px, 11vw, 52px);
  }

  .skill-star-name {
    font-size: clamp(9px, 2.7vw, 10px);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .share-card::after,
  .shell::after {
    display: none;
  }

  .header-spark-lottie {
    display: none;
  }
}
